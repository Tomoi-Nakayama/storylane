(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[36125],{36125:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return e2}});var r,o,a,i,d,l,u,c=t(47842),s=t(70865),m=t(66383),f=t(52322),v=t(2784),g=t(12524),p=t.n(g),h=t(97729),w=t.n(h),_=t(87093),y=t(938),E=t(84515),I=t(93316),x=t(66351),C=t(88744),b=t(35011),k=t(79758),j=t.n(k),U=function(e){var n=e.width,t=e.message,r=e.backgroundImageUrl,o=e.shareUrl,a=e.showFullScreenButton,i=e.showContinueButton,d=(0,v.useState)(!1),l=d[0],u=d[1],c=(0,v.useState)(!1),s=c[0],m=c[1];(0,v.useEffect)(function(){if(!l){var e=(0,C.Z)(function(){m(window.innerWidth<=n)},300,{leading:!1,trailing:!0});return e(),window.addEventListener("resize",e,!0),function(){window.removeEventListener("resize",e,!0)}}},[n,l]);var g=(0,v.useCallback)(function(){window.open("".concat(o),"_blank")},[o]);return l||!s?null:(0,f.jsxs)("div",{className:j().root,style:{backgroundImage:"url(".concat(r,")")},children:[(0,f.jsx)("h1",{className:j().title,children:void 0===t?"Your screen size looks too small for the demo experience":t}),i&&(0,f.jsx)(b.Z,{variant:"outline",onClick:function(){return u(!0)},children:"I Can Continue"}),a&&(0,f.jsx)(b.Z,{variant:"outline",onClick:g,children:"View Full Screen"})]})},S=t(82214),F=t(5632),W=t(99913),L=t(17627),D=function(e,n){return new URLSearchParams(e).get(n)},P=function(e){var n=window.location,t=(0,v.useState)(function(){return D(n.search,e)}),r=t[0],o=t[1];return(0,v.useEffect)(function(){var t=function(){o(D(n.search,e))};return(0,L.on)(window,"popstate",t),(0,L.on)(window,"pushstate",t),(0,L.on)(window,"replacestate",t),function(){(0,L.S1)(window,"popstate",t),(0,L.S1)(window,"pushstate",t),(0,L.S1)(window,"replacestate",t)}},[n.search,e]),r},Z=function(){return null},A=L.jU?P:Z,R=t(47467),q=t.n(R),N=t(96670),Q=t(61191),V=t(87997),T=t(61471),O=t(63955),M=t(59911),B=t(57144),G=t(87760),z=t.n(G),H=["first_name","last_name","email","company_name","phone",],J=function(e){var n=e.onSubmit,t=e.formConfig,r=(0,v.useState)(!1),o=r[0],a=r[1],i=(0,O.cI)({mode:"onChange"}),d=i.register,l=i.handleSubmit,u=i.formState,c=(0,v.useMemo)(function(){return t.fields.reduce(function(e,n){return e[H.findIndex(function(e){return e===n})]=n,e},[])},[t.fields]),m=(0,v.useCallback)(function(e){try{a(!0),n((0,N.Z)((0,s.Z)({},e),{source:T.M.InternalForm}))}catch(t){a(!1),console.error(t)}},[n]);return(0,f.jsxs)("div",{className:z().root,children:[(0,f.jsx)("h1",{className:z().header,children:t.title||"Try our Product Demo"}),(0,f.jsxs)("form",{onSubmit:l(m),className:z().formGrid,"data-testid":"lead-form",children:[c.map(function(e){var n,t,r,o,a;switch(e){case"email":return(0,f.jsx)(B.Z,(0,s.Z)({label:"Work Email",error:null===(n=u.errors.email)||void 0===n?void 0:n.message,type:"email",className:z().emailField,placeholder:"john.doe.work@company.com"},d("email",{required:"Email is required",pattern:{value:M.hH,message:"Invalid email"}})),"email");case"company_name":return(0,f.jsx)(B.Z,(0,s.Z)({label:"Company Name",error:null===(t=u.errors.company_name)||void 0===t?void 0:t.message,className:z().companyField},d("company_name",{required:"Company name is required"})),"company_name");case"first_name":return(0,f.jsx)(B.Z,(0,s.Z)({label:"First Name",error:null===(r=u.errors.first_name)||void 0===r?void 0:r.message,placeholder:"John"},d("first_name",{required:"First Name is required",maxLength:{value:100,message:"First name is too long"}})),"first_name");case"last_name":return(0,f.jsx)(B.Z,(0,s.Z)({label:"Last Name",error:null===(o=u.errors.last_name)||void 0===o?void 0:o.message,placeholder:"Doe"},d("last_name",{required:"Last Name is required",maxLength:{value:100,message:"Last name is too long"}})),"last_name");case"phone":return(0,f.jsx)(B.Z,(0,s.Z)({label:"Mobile",error:null===(a=u.errors.phone)||void 0===a?void 0:a.message,className:z().phoneField},d("phone",{required:"Mobile is required",maxLength:{value:100,message:"Last name is too long"}})),"phone")}}),(0,f.jsx)("button",{className:z().submit,type:"submit",disabled:o||!u.isValid||u.isSubmitting,children:t.cta||"Continue"})]})]})},K=t(11586),Y=t.n(K),$=(0,v.createContext)(null),X=function(e){var n=e.state,t=e.queryFlags,r=e.shareUrl,o=e.children,a=e.demoPlayerEventEmitter,i=e.demoId,d=e.service,l=e.hostInfo,u=e.setCrossOriginTextSubstitutions,c=e.demoParentType,s=e.httpReferer;return(0,f.jsx)($.Provider,{value:{demoId:i,queryFlags:t,state:n,shareUrl:r,demoPlayerEventEmitter:a,hostInfo:l,service:d,setCrossOriginTextSubstitutions:u,demoParentType:c,httpReferer:s},children:o})},ee=function(){return(0,v.useContext)($)},en=function(e){var n,t=e.showWatermark,r=e.watermarkLogoHref,o=ee(),a=o.state,i=o.service,d=function(e){i.send({type:"LEAD_CREATED",lead:(0,N.Z)((0,s.Z)({},e.lead),{source:T.M.VendorForm})})},l=function(e){i.send({type:"LEAD_CREATED",lead:e})},u=a.context.leadFormConfig;return(0,f.jsxs)(f.Fragment,{children:["internal"===u.source?(0,f.jsx)(J,{onSubmit:l,formConfig:u.internal_form}):(0,f.jsx)(Q.Z,{projectId:a.context.project.id,onSubmit:d,width:u.internal_form.width,height:u.internal_form.height,backgroundColor:u.internal_form.backgroundColor,urlQuery:void 0}),t&&(0,f.jsx)("div",{className:Y().watermark,children:(0,f.jsx)(V.Z,{testId:"lead-form-watermark",href:r})})]})},et=t(82998),er=t(36260),eo=t(11963),ea=t(83564),ei=t(89605),ed=t(65478),el=t(34135),eu=t(8535),ec=t(15103),es=t(87032),em=t(68221),ef=t(93122),ev=t(97885),eg=t(35946),ep=t(83496),eh=t(3355),ew=t(82095),e_=t(13004),ey=t(23884),eE=t(24845),eI=t(95434),ex=t(34448),eC=t(15079),eb=t(50930),ek=t(95957),ej=t(97386);(u=r||(r={})).DispatchAnalyticsEvent="dispatchAnalyticsEvent",u.ReceivedUserConsent="receivedUserConsent",u.DocumentInViewport="documentInViewport";var eU,eS=(0,ek.C)({id:"demoPageAnalytics",initial:"releaseGate",context:{isDocumentInViewport:!1,isUserCookieConsentReceived:!1,waitUserCookieConsent:!1,waitDocumentInViewport:!0,events:[],disabled:!1},states:{releaseGate:{always:[{cond:function(e){return e.disabled},target:"disabled"},{target:"release",cond:function(e){var n=!e.waitDocumentInViewport||e.isDocumentInViewport,t=!e.waitUserCookieConsent||e.isUserCookieConsentReceived;return n&&t}},{target:"wait"},]},wait:{on:{dispatchAnalyticsEvent:{internal:!0,actions:"putEventIntoQueue"},receivedUserConsent:{target:"releaseGate",actions:"receivedUserConsentAction"},documentInViewport:{target:"releaseGate",actions:"documentInViewportAction"}}},release:{entry:["releaseQueuedEvents"],on:{dispatchAnalyticsEvent:{internal:!0,actions:function(e,n){n.fn()}}}},disabled:{type:"final"}}},{actions:{documentInViewportAction:(0,ej.f0)(function(){return{isDocumentInViewport:!0}}),receivedUserConsentAction:(0,ej.f0)(function(){return{isUserCookieConsentReceived:!0}}),releaseQueuedEvents:(0,ej.f0)(function(e){return e.events.forEach(function(e){e()}),{events:[]}}),putEventIntoQueue:(0,ej.f0)(function(e,n){return n.type===r.DispatchAnalyticsEvent?{events:(0,eb.Z)(e.events).concat([n.fn])}:{}})}});(eU=o||(o={})).QueueEvent="QUEUE_EVENT",eU.GaInitialized="GA_INITIALIZED";var eF,eW,eL=(0,ek.C)({id:"vendorAnalytics",initial:"queueing",context:{events:[],isGaInitialized:!1,gaMeasurementId:"",clientId:null},states:{queueing:{on:(i={},(0,c.Z)(i,o.QueueEvent,{actions:(0,ej.f0)({events:function(e,n){return(0,eb.Z)(e.events).concat([n.fn])}})}),(0,c.Z)(i,o.GaInitialized,{target:"ready",actions:[(0,ej.f0)({isGaInitialized:!0,gaMeasurementId:function(e,n){return n.gaMeasurementId},clientId:function(e,n){return null!==(a=n.clientId)&&void 0!==a?a:null}}),function(e,n){var t,r,o,a,i,d;r=document,o=n.gaMeasurementId,a=null!==(t=n.clientId)&&void 0!==t?t:void 0,(i=r.createElement("script")).async=!0,i.src="https://www.googletagmanager.com/gtag/js?id=".concat(o),r.head.appendChild(i),(d=r.createElement("script")).id="ga-script",d.textContent="\n      window.dataLayer = window.dataLayer || [];\n      function gtag(){dataLayer.push(arguments);}\n      gtag('js', new Date());\n      gtag('config', '".concat(o,"', ").concat(JSON.stringify((0,s.Z)({cookie_flags:"samesite=none;secure",send_page_view:!1},a?{client_id:a}:{})),");\n    "),r.head.appendChild(d)},]}),i)},ready:{entry:function(e){return e.events.forEach(function(e){return e()})},on:(0,c.Z)({},o.QueueEvent,{actions:function(e,n){return n.fn()}})}}}),eD=t(47309);(eF=d||(d={})).Full="full",eF.Lite="lite",(eW=l||(l={})).DemoOpened="sl_demo_open",eW.WidgetChanged="sl_step_view",eW.WidgetCtaClick="sl_primary_cta",eW.WidgetSecondaryClick="sl_secondary_cta",eW.FlowChanged="sl_flow_start",eW.FlowEnd="sl_flow_end",eW.ChapterStart="sl_chapter_start",eW.ChapterEnd="sl_chapter_end",eW.PageChanged="sl_page_view",eW.LeadCaptured="sl_lead_identify",eW.OpenedExternalUrl="sl_open_external_url",eW.FlowlistItemClick="sl_checklist_item_view",eW.DemoFinished="sl_demo_finished",eW.CustomCta="sl_convert_cta",eW.DemoEngaged15="sl_15_demo_engaged",eW.DemoEngaged25="sl_25_demo_engaged",eW.DemoEngaged50="sl_50_demo_engaged",eW.DemoEngaged75="sl_75_demo_engaged",eW.DemoEngaged100="sl_100_demo_engaged";var eP=new Map([[15,l.DemoEngaged15],[25,l.DemoEngaged25],[50,l.DemoEngaged50],[75,l.DemoEngaged75],[100,l.DemoEngaged100],]);function eZ(e){return{create:function(n){return{name:e,payload:n}},match:function(n){return n.name===e}}}var eA=eZ(l.DemoOpened),eR=eZ(l.DemoFinished),eq=eZ(l.FlowlistItemClick),eN=eZ(l.FlowEnd),eQ=eZ(l.ChapterEnd),eV=eZ(l.PageChanged),eT=eZ(l.LeadCaptured),eO=eZ(l.FlowChanged),eM=eZ(l.ChapterStart),eB=eZ(l.WidgetChanged),eG=eZ(l.WidgetCtaClick),ez=eZ(l.WidgetSecondaryClick),eH=eZ(l.OpenedExternalUrl),eJ=eZ(l.CustomCta),eK=function(e){return eZ(e)},eY=t(62326),e$=function(e,n){var t=Array.from(eP.keys()).sort(function(e,n){return n-e}),r=Math.max(e.percentViewed,"tick"===n.type?e.secondsSpent+1:e.secondsSpent),o=t.find(function(e){return r>=e});return!o||e.reachedEngagementLevel[0]>=o?e.reachedEngagementLevel:[o,!1]},eX=(0,ek.C)({id:"demoEngagementAnalyticsTracking",initial:"initial",context:{percentViewed:0,secondsSpent:0,reachedEngagementLevel:[0,!1],enabled:!0},states:{initial:{always:[{cond:function(e){return!1===e.enabled},target:"completed"},{target:"waitingForUserActivation",cond:function(e){return!0===e.enabled}},]},waitingForUserActivation:{invoke:{src:function(){return function(e){var n,t;return n=function(){return e({type:"start"})},t=function(){try{var e=window.navigator.userActivation.isActive,t=window.navigator.userActivation.hasBeenActive;if(e||t)return n(),!0;return!1}catch(r){return!0}},(0,eY.Uz)({cb:t,interval:500}),function(){(0,eY.NE)(t)}}}},on:{start:{target:"tracking"},viewProgress:{actions:(0,ej.f0)({percentViewed:function(e,n){return n.percentValue}})}}},tracking:{invoke:{src:function(){return function(e){var n=setInterval(function(){e({type:"tick"})},1e3);return function(){return clearInterval(n)}}}},on:{tick:[{actions:["sendEngagementAnalyticsEvent"],cond:function(e){return Math.max(e.percentViewed,e.secondsSpent)>=100},target:"completed"},{actions:[(0,ej.f0)(function(e,n){return{secondsSpent:e.secondsSpent+1,reachedEngagementLevel:e$(e,n)}}),"sendEngagementAnalyticsEvent",]},],viewProgress:[{actions:["sendEngagementAnalyticsEvent"],cond:function(e){return Math.max(e.percentViewed,e.secondsSpent)>=100},target:"completed"},{actions:[(0,ej.f0)(function(e,n){return{percentViewed:Math.max(e.percentViewed,n.percentValue),reachedEngagementLevel:e$(e,n)}}),"sendEngagementAnalyticsEvent",]},]}},completed:{type:"final"}}}),e0=t(74714),e1=function(){var e,n,t,a,i,u,c,m,f,g,p,h,w,y=ee(),I=y.state,x=y.shareUrl,C=y.demoId,b=y.queryFlags,k=y.service,j=y.demoParentType,U=(n=(e={disabled:b.recording,waitUserCookieConsent:null===j&&I.context.project.cookie_consent_required}).disabled,t=e.waitUserCookieConsent,a=(0,el.k)(eS,{context:{disabled:n,waitUserCookieConsent:t}}),i=(0,v.useMemo)(function(){return function(e){a.send({type:r.DispatchAnalyticsEvent,fn:e})}},[a]),u=(0,v.useCallback)(function(){a.send(r.ReceivedUserConsent)},[a]),c=(0,v.useCallback)(function(){a.send(r.DocumentInViewport)},[a]),{dispatch:i,onCookieConsentReceived:u,onDocumentInViewport:c}),S=U.dispatch,F=U.onCookieConsentReceived,W=U.onDocumentInViewport,L=(f=(m=(0,v.useState)(!1))[0],g=m[1],(0,v.useEffect)(function(){if(!f)try{var e=(0,ec.Z)({root:null,element:window.document.documentElement,threshold:[.1,.2,.3,.4,.5,.6,.7,.8,.9,1],cb:function(n){n[0].intersectionRatio>.5&&(g(!0),e())}});return e}catch(n){g(!0)}},[f]),f);(0,v.useEffect)(function(){L&&W()},[L,W]);var D,P,Z,A,R,q,Q,V,T,O,M,B,G,z,H,J,K,Y,$,X,en,et,er,eo,ea,ei,ed,eb,ek,eU,eF,eW,eZ,eY,e$,e1,e6,e5,e7,e3,e2,e4,e8,e9,ne,nn,nt,nr,no,na,ni,nd,nl,nu,nc,ns,nm,nf,nv,ng,np,nh,nw,n_,ny,nE,nI,nx,nC,nb,nk,nj,nU,nS=(h=(p=(0,v.useState)(!1))[0],w=p[1],(0,v.useEffect)(function(){var e=function(e){try{var n;(null===(n=e.data)||void 0===n?void 0:n.message)===eE.NX&&w(!0)}catch(t){console.error(t)}};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}},[]),{userCookieConsentReceived:h}).userCookieConsentReceived;return(0,v.useEffect)(function(){nS&&F()},[F,nS]),P=(D={project:I.context.project,query:b.query,demoId:C,baseUrl:"https://api.storylane.io/api/v1/",dispatchFn:S,service:k}).demoId,Z=D.query,A=D.baseUrl,R=D.project,q=D.dispatchFn,Q=D.service,V=(0,eu.v)(Q,function(e){return e.context.lead}),T=(0,v.useRef)(V),O=(0,v.useRef)((0,ex.gP)(P)),T.current=V,B=(M=ee()).hostInfo,G=M.demoPlayerEventEmitter,z=M.httpReferer,H=(0,eC.A)({eventAction:eC.B.StorylaneShareUserId,postMessageAction:eC.B.StorylaneSharePageDemoReady}).eventData,J=(0,v.useRef)(void 0),(0,v.useEffect)(function(){J.current=null==H?void 0:H.user_id},[null==H?void 0:H.user_id]),(0,v.useEffect)(function(){var e=function(e){try{var n,t,r,o,a,i,d;if((null===(n=e.data)||void 0===n?void 0:n.message)===eE.rf&&Boolean(null===(t=e.data)||void 0===t?void 0:t.payload)&&"object"==typeof(null===(r=e.data)||void 0===r?void 0:r.payload))q(function(){return(0,e0.g)({demoId:P,projectId:R.id,event:eD.Q.LeadCaptured,query:Z,clientTracking:e.data.payload,baseUrl:A,userId:J.current,leadInfo:T.current,sessionId:O.current.id})});else if(Boolean(null===(o=e.data)||void 0===o?void 0:o.tracking)&&(null===(a=e.data)||void 0===a?void 0:a.source)===eE.kf){var l=Boolean(e.data.ref)&&"string"==typeof e.data.ref.referrer?e.data.ref.referrer:null,u=Boolean(e.data.ref)&&"string"==typeof e.data.ref.originalReferrer?e.data.ref.originalReferrer:null;q(function(){return(0,e0.n)({projectId:R.id,companyId:R.company_id,demoId:P,tracking:e.data.tracking,referrer:l,originalReferrer:u,baseUrl:A})})}else Boolean(null===(i=e.data)||void 0===i?void 0:i.lead)&&(null===(d=e.data)||void 0===d?void 0:d.source)===eE.Tl&&q(function(){return(0,e0.g)({demoId:P,projectId:R.id,event:eD.Q.LeadCaptured,query:Z,clientTracking:e.data.lead,baseUrl:A,userId:J.current,leadInfo:T.current,sessionId:O.current.id})})}catch(c){console.error(c)}};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}},[q,R,P,Z,B,A]),K=(0,v.useCallback)(function(){return q(function(){var e,n;return(0,e0.g)({demoId:P,projectId:R.id,event:eD.Q.Interacted,query:Z,hostUrl:null===(e=B.current)||void 0===e?void 0:e.url,urlQuery:null===(n=B.current)||void 0===n?void 0:n.query,baseUrl:A,userId:J.current,leadInfo:T.current,sessionId:O.current.id})})},[q,R,P,Z,B,A,J,T,]),(0,eI.r)(K),(0,v.useEffect)(function(){(0,ex.gP)(P).state[eD.Q.Opened]||q(function(){var e,n;return(0,e0.g)({demoId:P,projectId:R.id,event:eD.Q.Opened,query:Z,hostUrl:null===(e=B.current)||void 0===e?void 0:e.url,urlQuery:null===(n=B.current)||void 0===n?void 0:n.query,baseUrl:A,userId:J.current,leadInfo:T.current,referrer:z,sessionId:O.current.id})})},[q,R,P,Z,B,A,z]),Y="flv_"+P,X=null==($=null==R?void 0:R.flowlists[0])?void 0:$.items.map(function(e){return[e.id,!1]}),en=(0,eh.Z)(X),(0,v.useEffect)(function(){if(Object.keys(en).length){var e=eg.jj.getItem(Y),n=JSON.parse(e||"{}"),t=(0,ep.Z)(Object.keys(n),Object.keys(en));(!e||t.length>0)&&eg.jj.setItem(Y,JSON.stringify(en))}},[P,en,Y,R]),(0,v.useEffect)(function(){return G.on(E.W6.flowChangeEvent,function(e){var n=e.flowId;return q(function(){var e,t;return(0,e0.g)({demoId:P,projectId:R.id,event:eD.Q.FlowStarted,targetId:n,query:Z,hostUrl:null===(e=B.current)||void 0===e?void 0:e.url,urlQuery:null===(t=B.current)||void 0===t?void 0:t.query,baseUrl:A,userId:J.current,leadInfo:T.current,sessionId:O.current.id})})})},[G,q,R,P,Z,B,A,]),(0,v.useEffect)(function(){return G.on(E.W6.walkthroughFinishedEvent,function(){q(function(){var e,n;return(0,e0.g)({demoId:P,projectId:R.id,event:eD.Q.Closed,query:Z,hostUrl:null===(e=B.current)||void 0===e?void 0:e.url,urlQuery:null===(n=B.current)||void 0===n?void 0:n.query,baseUrl:A,userId:J.current,leadInfo:T.current,sessionId:O.current.id})})})},[G,P,q,R.id,R.company_id,Z,B,A,]),(0,v.useEffect)(function(){return G.on(E.W6.widgetChangeEvent,function(e){var n=e.widgetId;return q(function(){var e,t;return(0,e0.g)({demoId:P,projectId:R.id,event:eD.Q.WidgetViewed,targetId:n,query:Z,hostUrl:null===(e=B.current)||void 0===e?void 0:e.url,urlQuery:null===(t=B.current)||void 0===t?void 0:t.query,baseUrl:A,userId:J.current,leadInfo:T.current,sessionId:O.current.id})})})},[G,q,R,P,Z,B,A,]),(0,v.useEffect)(function(){return G.on(E.W6.flowlistItemClickEvent,function(e){var n=e.itemId,t=eg.jj.getItem(Y);if(t){var r=JSON.parse(t);r[n]=!0,eg.jj.setItem(Y,JSON.stringify(r)),Object.values(r).every(function(e){return e})&&$&&q(function(){var e,n;return(0,e0.g)({demoId:P,projectId:R.id,event:eD.Q.FlowlistCompleted,targetId:$.id,query:Z,hostUrl:null===(e=B.current)||void 0===e?void 0:e.url,urlQuery:null===(n=B.current)||void 0===n?void 0:n.query,baseUrl:A,userId:J.current,leadInfo:T.current,sessionId:O.current.id})})}})},[G,q,R,P,Z,B,A,$,Y,]),(0,v.useEffect)(function(){return G.on(E.W6.lastWidgetEnterEvent,function(e){var n=e.flowId;q(function(){var e,t;return(0,e0.g)({demoId:P,projectId:R.id,event:eD.Q.FlowEnded,targetId:n,query:Z,hostUrl:null===(e=B.current)||void 0===e?void 0:e.url,urlQuery:null===(t=B.current)||void 0===t?void 0:t.query,baseUrl:A,userId:J.current,leadInfo:T.current,sessionId:O.current.id})})})},[q,G,R,P,Z,B,A,]),(0,v.useEffect)(function(){if(R.kind!==_.lI.Image)return G.on(E.W6.pageChangeEvent,function(e){q(function(){var n,t;return(0,e0.g)({demoId:P,projectId:R.id,event:eD.Q.PageViewed,targetId:e.pageId,query:Z,hostUrl:null===(n=B.current)||void 0===n?void 0:n.url,urlQuery:null===(t=B.current)||void 0===t?void 0:t.query,baseUrl:A,userId:J.current,leadInfo:T.current,sessionId:O.current.id})})})},[q,G,R,P,Z,B,A,]),(0,v.useEffect)(function(){var e=function(e,n){if(e.isKnownLead&&!(null==n?void 0:n.isKnownLead)&&e.lead){var t=(0,s.Z)({},e.lead);q(function(){return(0,e0.g)({projectId:R.id,baseUrl:A,demoId:P,event:eD.Q.LeadCaptured,leadCapturedInfo:(0,s.Z)({external_user_id:t.externalId,email:t.email},(0,ew.Z)(t,["externalId","email"])),leadInfo:T.current,sessionId:O.current.id})})}};return Q.onChange(e),function(){Q.off(e)}},[Q,q,R.id,P,A,G,]),et=(0,v.useCallback)(function(e,n){q(function(){var t,r;return(0,e0.g)({demoId:P,projectId:R.id,event:eD.Q.CtaOpened,targetId:n,extUrl:e,query:Z,hostUrl:null===(t=B.current)||void 0===t?void 0:t.url,urlQuery:null===(r=B.current)||void 0===r?void 0:r.query,baseUrl:A,userId:J.current,leadInfo:T.current,sessionId:O.current.id})})},[q,R,P,Z,B,A]),(0,v.useEffect)(function(){return G.on(E.W6.flowlistItemOpenExternalUrlEvent,function(e){var n,t=e.data,r=e.itemId,o=(0,ey.L)((0,N.Z)((0,s.Z)({},t),{additionalQuery:null===(n=B.current)||void 0===n?void 0:n.query}));o&&et(o.url,r)})},[G,B,et]),(0,v.useEffect)(function(){return G.on(E.W6.widgetOpenExternalUrlEvent,function(e){var n,t=e.data,r=e.widgetId,o=(0,ey.L)((0,N.Z)((0,s.Z)({},t),{additionalQuery:null===(n=B.current)||void 0===n?void 0:n.query}));o&&et(o.url,r)})},[G,B,et]),(0,v.useEffect)(function(){return G.on(E.W6.customCtaClickEvent,function(e){var n,t=e.data,r=e.projectId,o=(0,ey.L)((0,N.Z)((0,s.Z)({},t),{additionalQuery:null===(n=B.current)||void 0===n?void 0:n.query}));o&&et(o.url,r)})},[G,et,B]),eo=(er={enabled:Boolean(I.context.project.ga_measurement_id),project:I.context.project,flows:I.context.flows,widgets:I.context.widgets,shareUrl:x,baseUrl:"https://api.storylane.io/api/v1/",demoId:C,query:b.query,service:k,demoParentType:j,dispatchFn:S}).enabled,ea=er.demoId,ei=er.project,ed=er.flows,eb=er.widgets,ek=er.shareUrl,eU=er.service,eF=er.demoParentType,eW=er.dispatchFn,eY=(eZ=ee()).hostInfo,e$=eZ.demoPlayerEventEmitter,e1=eZ.httpReferer,e6=(null==ei?void 0:ei.name)||"",e5=ei.ga_lite_enabled?d.Lite:d.Full,nI=null===(nE=(ny={demoParentType:eF}).demoParentType),nC=(nx=(0,v.useState)(void 0))[0],nb=nx[1],nj=(nk=(0,v.useState)("hub"===nE||"share"===nE))[0],nU=nk[1],e3=(e7=((0,v.useEffect)(function(){if(nI){var e=setTimeout(function(){nU(!0)},5e3),n=function(n){var t;if((null===(t=n.data)||void 0===t?void 0:t.source)===eE.WZ){var r,o,a=null===(r=n.data)||void 0===r?void 0:null===(o=r.host)||void 0===o?void 0:o.gaClientId;a&&(nb(a),nU(!0),clearTimeout(e))}};return window.addEventListener("message",n),function(){window.removeEventListener("message",n),clearTimeout(e)}}},[nI]),{clientId:nC,shouldInitGA:nj})).shouldInitGA,e2=e7.clientId,e4=(0,el.k)(eL),nn=(ne={queueEvent:e8=(0,v.useCallback)(function(e){e4.send({type:o.QueueEvent,fn:e})},[e4]),onGaInitialized:e9=(0,v.useCallback)(function(e,n){e4.send({type:o.GaInitialized,gaMeasurementId:e,clientId:n})},[e4])}).queueEvent,nt=ne.onGaInitialized,nd=(no={dispatchVendorAnalyticsEvent:nr=(0,v.useMemo)(function(){return function(e){if(eo){var n,t,r=e5===d.Lite&&(eA.match(e)||eR.match(e)||eK(l.DemoEngaged15).match(e)||eK(l.DemoEngaged25).match(e)||eK(l.DemoEngaged50).match(e)||eK(l.DemoEngaged75).match(e)||eK(l.DemoEngaged100).match(e)||eT.match(e)||eH.match(e)),o=e5===d.Full&&(eA.match(e)||eR.match(e)||eV.match(e)||eB.match(e)||eG.match(e)||ez.match(e)||eO.match(e)||eM.match(e)||eN.match(e)||eQ.match(e)||eH.match(e)||eJ.match(e)||eT.match(e)||eq.match(e));(r||o)&&nn(function(){return eW(function(){var n;"function"==typeof window.gtag&&window.gtag("event",e.name,e.payload)})})}}},[eo,nn,eW,e5]),enabled:e5===d.Lite,demoId:ea,demoName:e6,hostInfo:eY,shareUrl:ek,httpReferer:e1,demoPlayerEventEmitter:e$}).demoId,nl=no.demoName,nu=no.shareUrl,nc=no.httpReferer,ns=no.dispatchVendorAnalyticsEvent,nm=no.enabled,nf=no.demoPlayerEventEmitter,nv=no.hostInfo,ng=null!=nc?nc:"",np=null!==(ni=null===(na=nv.current)||void 0===na?void 0:na.url)&&void 0!==ni?ni:"",nh=(0,el.k)(eX,{context:{enabled:nm},actions:{sendEngagementAnalyticsEvent:(0,ej.f0)(function(e){var n=eP.get(e.reachedEngagementLevel[0]);return n&&!1===e.reachedEngagementLevel[1]?(ns(eK(n).create({demo_id:nd,demo_name:nl,demo_url:nu,seconds_spent:e.secondsSpent,percent_viewed:e.percentViewed,referrer:ng,host_url:np})),{reachedEngagementLevel:[e.reachedEngagementLevel[0],!0,]}):{}})}}).send,(0,v.useEffect)(function(){if(nm){var e=nf.on(E.W6.widgetChangeEvent,function(e){nh({type:"viewProgress",percentValue:e.progress})}),n=nf.on(E.W6.pageChangeEvent,function(e){nh({type:"viewProgress",percentValue:e.progress})});return function(){e(),n()}}},[nf,nm,nh]),(0,v.useEffect)(function(){e3&&ei.ga_measurement_id&&nt(ei.ga_measurement_id,null!=e2?e2:null)},[e3,nt,ei.ga_measurement_id,e2]),(0,v.useEffect)(function(){nr(eA.create({demo_id:ea,demo_name:e6,demo_url:ek}))},[ea,e6,ek,nr]),(0,v.useEffect)(function(){if(ei.kind!==_.lI.Image)return e$.on(E.W6.pageChangeEvent,function(e){var n=null==ei?void 0:ei.pages.find(function(n){return n.id===e.pageId});if(!n){console.error("Unable to find page by id: ".concat(e.pageId));return}nr(eV.create({demo_id:ea,demo_name:e6,demo_url:ek,page_id:n.id,page_name:n.name}))})},[nr,ek,e6,e$,ei,ea,]),(0,v.useEffect)(function(){return e$.on(E.W6.widgetChangeEvent,function(e){var n=e.widgetId,t=null==eb?void 0:eb[n],r=t?null==ed?void 0:ed[t.flowId]:null;if(t&&r){var o=r.widgets.findIndex(function(e){return e===n});nr(eB.create({demo_id:ea,demo_name:e6,demo_url:ek,flow_id:r.id,flow_name:r.name,chapter_id:r.id,chapter_name:r.name,step_id:t.id,step_index:o}))}})},[eb,ed,ea,ek,e6,nr,e$,]),(0,v.useEffect)(function(){return e$.on(E.W6.widgetCtaClickEvent,function(e){var n=e.widgetId,t=null==eb?void 0:eb[n],r=t?null==ed?void 0:ed[t.flowId]:null;if(t&&r){var o=r.widgets.findIndex(function(e){return e===n});nr(eG.create({demo_id:ea,demo_name:e6,demo_url:ek,flow_id:r.id,flow_name:r.name,chapter_id:r.id,chapter_name:r.name,step_id:t.id,step_index:o}))}})},[e$,eb,ed,ea,ek,e6,nr,]),(0,v.useEffect)(function(){return e$.on(E.W6.widgetSecondaryClickEvent,function(e){var n=e.widgetId,t=null==eb?void 0:eb[n],r=t?null==ed?void 0:ed[t.flowId]:null;if(t&&r){var o=r.widgets.findIndex(function(e){return e===n});nr(ez.create({demo_id:ea,demo_name:e6,demo_url:ek,flow_id:r.id,flow_name:r.name,chapter_id:r.id,chapter_name:r.name,step_id:t.id,step_index:o}))}})},[e$,eb,ed,ea,ek,e6,nr,]),(0,v.useEffect)(function(){return e$.on(E.W6.flowChangeEvent,function(e){var n=e.flowId,t=null==ed?void 0:ed[n];t&&(nr(eO.create({demo_id:ea,demo_name:e6,demo_url:ek,flow_id:t.id,flow_name:t.name})),nr(eM.create({demo_id:ea,demo_name:e6,demo_url:ek,chapter_id:t.id,chapter_name:t.name})))})},[eb,ed,ea,ek,e6,e$,nr,]),(0,v.useEffect)(function(){return e$.on(E.W6.lastWidgetEnterEvent,function(e){var n=e.flowId,t=null==ed?void 0:ed[n];t&&(nr(eN.create({demo_id:ea,demo_name:e6,demo_url:ek,flow_id:t.id,flow_name:t.name})),nr(eQ.create({demo_id:ea,demo_name:e6,demo_url:ek,chapter_id:t.id,chapter_name:t.name})))})},[eb,ed,ea,ek,e6,e$,nr,]),nw=(0,v.useCallback)(function(e,n){if(n){var t,r,o,a=null==eb?void 0:eb[n],i=a?null==ed?void 0:ed[a.flowId]:null;a&&i&&(t=i.widgets.findIndex(function(e){return e===n})),o=null==i?void 0:i.name,r=null==i?void 0:i.id}nr(eH.create({demo_id:ea,demo_name:e6,demo_url:ek,step_id:n,step_index:t,flow_id:r,flow_name:o,chapter_id:r,chapter_name:o,ext_url:(null==e?void 0:e.url)||"",ext_url_target:e.target}))},[ea,e6,ek,ed,eb,nr]),(0,v.useEffect)(function(){return e$.on(E.W6.flowlistItemOpenExternalUrlEvent,function(e){var n,t=e.data,r=(0,ey.L)((0,N.Z)((0,s.Z)({},t),{additionalQuery:null===(n=eY.current)||void 0===n?void 0:n.query}));r&&nw(r)})},[e$,eY,nw]),(0,v.useEffect)(function(){return e$.on(E.W6.widgetOpenExternalUrlEvent,function(e){var n,t=e.data,r=e.widgetId,o=(0,ey.L)((0,N.Z)((0,s.Z)({},t),{additionalQuery:null===(n=eY.current)||void 0===n?void 0:n.query}));o&&nw(o,r)})},[e$,eY,nw]),n_=(0,v.useCallback)(function(e,n){if(n){var t,r,o,a=null==eb?void 0:eb[n],i=a?null==ed?void 0:ed[a.flowId]:null;a&&i&&(t=i.widgets.findIndex(function(e){return e===n})),o=null==i?void 0:i.name,r=null==i?void 0:i.id}nr(eJ.create({demo_id:ea,demo_name:e6,demo_url:ek,step_id:n,step_index:t,flow_id:r,flow_name:o,chapter_id:r,chapter_name:o,ext_url:(null==e?void 0:e.url)||"",ext_url_target:e.target}))},[ea,e6,ek,ed,eb,nr]),(0,v.useEffect)(function(){return e$.on(E.W6.customCtaClickEvent,function(e){var n=e.data,t=e.widgetId;try{var r,o=(0,ey.L)((0,N.Z)((0,s.Z)({},n),{additionalQuery:null===(r=eY.current)||void 0===r?void 0:r.query}));if(!o)return;n_(o,t)}catch(a){(0,e_.Tb)(a)}})},[e$,n_,eY]),(0,v.useEffect)(function(){var e=function(e,n){if(e.isKnownLead&&!(null==n?void 0:n.isKnownLead)&&e.lead){var t=(0,s.Z)({},e.lead);nr(eT.create((0,s.Z)({demo_id:ea,demo_name:e6,demo_url:ek},function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"_";try{return(0,es.Z)(n,function(n,o,a){var i=t?"".concat(t).concat(r).concat(a):a;return(0,ef.Z)(o)&&!(0,ev.Z)(o)?(0,em.Z)(n,e(o,i,r)):("string"==typeof o||"number"==typeof o||"boolean"==typeof o)&&(n[i]=o),n},{})}catch(o){return console.error(o),{}}}(t,"","lead"))))}};return eU.onChange(e),function(){eU.off(e)}},[e$,ea,e6,ek,eU,nr,]),(0,v.useEffect)(function(){return e$.on(E.W6.flowlistItemClickEvent,function(e){var n=e.itemId;nr(eq.create({demo_id:ea,demo_name:e6,demo_url:ek,flowlist_item_id:n}))})},[e$,e6,ek,ea,nr,]),(0,v.useEffect)(function(){return e$.on(E.W6.walkthroughFinishedEvent,function(){nr(eR.create({demo_id:ea,demo_name:e6,demo_url:ek}))})},[e$,ea,e6,ek,nr,]),null},e6=t(26297);function e5(e){var n=e.demoId,t=e.shareUrl,r=e.demoName,o=(0,e6.Z)(e,["demoId","shareUrl","demoName"]),a={event:o.event,demo:{id:n,url:t,name:r}};return o.event===eE.rc.LeadCaptured&&o.lead&&(a.lead=o.lead),(o.event===eE.rc.FlowChanged||o.event===eE.rc.WidgetChanged||o.event===eE.rc.FlowEnd||o.event===eE.rc.OpenedExternalUrl||o.event===eE.rc.WidgetCtaClick||o.event===eE.rc.WidgetSecondaryClick||o.event===eE.rc.CustomCta||o.event===eE.rc.WidgetReady)&&o.flow&&(a.flow=o.flow,o.event===eE.rc.FlowChanged&&(a.deprecated="This event is deprecated. See: 'chapter_start' event"),o.event===eE.rc.FlowEnd&&(a.deprecated="This event is deprecated. See: 'chapter_end' event"),o.event!==eE.rc.FlowChanged&&o.event!==eE.rc.FlowEnd&&(a.chapter=o.flow)),(o.event===eE.rc.ChapterStart||o.event===eE.rc.ChapterEnd)&&o.chapter&&(a.chapter=o.chapter),(o.event===eE.rc.WidgetChanged||o.event===eE.rc.OpenedExternalUrl||o.event===eE.rc.WidgetCtaClick||o.event===eE.rc.WidgetSecondaryClick||o.event===eE.rc.CustomCta||o.event===eE.rc.WidgetReady)&&o.widget&&(a.step=(0,N.Z)((0,s.Z)({},o.widget),{index:o.widget.index+1})),(o.event===eE.rc.PageChanged||o.event===eE.rc.RecordingStart)&&(a.page=o.page),(o.event===eE.rc.OpenedExternalUrl||o.event===eE.rc.CustomCta)&&(a.target={url:o.extUrl,target:o.extUrlTarget}),o.event===eE.rc.FlowlistItemClick&&(a.checklist_item={id:o.flowlistItemId}),{message:eE.mr,payload:a}}var e7=function(){var e,n,t,r,o,a,i,d,l,u,c,m,f,g,p,h,w,_,y,I,x,C,b,k,j,U,S=ee(),F=S.state,W=S.shareUrl,L=S.demoId,D=S.demoPlayerEventEmitter,P=S.queryFlags,Z=S.hostInfo,A=S.setCrossOriginTextSubstitutions;return n=(e={project:F.context.project,flows:F.context.flows,widgets:F.context.widgets,demoId:L,query:P.query,enabled:F.matches(eo.Ae.Playback),baseUrl:"https://api.storylane.io/api/v1/",shareUrl:W,demoPlayerEventEmitter:D,enabledRecordingStartEvent:P.recording,enabledWidgetReadyEvent:P.recording,enabledRecordingStopEvent:P.recording,hostInfo:Z,onReceiveTextSubstitutions:A}).enabled,t=e.demoId,r=e.project,o=e.flows,a=e.widgets,i=e.query,d=e.baseUrl,l=e.shareUrl,u=e.enabledRecordingStartEvent,c=e.enabledWidgetReadyEvent,m=e.enabledRecordingStopEvent,f=e.onReceiveTextSubstitutions,g=e.demoPlayerEventEmitter,p=e.hostInfo,w=(h=(0,v.useState)(!1))[0],_=h[1],y=null==r?void 0:r.id,I=null==r?void 0:r.company_id,x=(null==r?void 0:r.name)||"",C=(0,v.useCallback)(function(e){window.parent!==window&&window.parent.postMessage(e,"*"),window.postMessage(e,"*")},[]),k=null==(b=(0,eC.A)({eventAction:eC.B.StorylaneShareUserId,postMessageAction:eC.B.StorylaneSharePageDemoReady}).eventData)?void 0:b.user_id,(0,v.useEffect)(function(){if(y&&I){var e=function(e){try{var n,t,r;(null===(n=e.data)||void 0===n?void 0:n.message)===eE.hR&&Boolean(null===(t=e.data)||void 0===t?void 0:t.payload.token)&&"object"==typeof(null===(r=e.data)||void 0===r?void 0:r.payload.token)&&f(e.data.payload.token)}catch(o){console.error(o)}};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}},[t,y,I,i,d,k,f,]),(0,v.useEffect)(function(){var e=window.parent;n&&!w&&(_(!0),e.postMessage({source:eE.IY,ready:!0},"*"))},[n,w]),(0,v.useEffect)(function(){C(e5({event:eE.rc.ProjectResolved,demoId:t,shareUrl:l,demoName:x}))},[C,t,x,l]),(0,v.useEffect)(function(){return g.on(E.W6.pageChangeEvent,function(e){var n=e.pageId,o=null==r?void 0:r.pages.find(function(e){return e.id===n});if(!o){console.error("Unable to find page by id: ".concat(n));return}C(e5({event:eE.rc.PageChanged,shareUrl:l,demoId:t,page:{id:o.id,name:o.name},demoName:x}))})},[t,x,l,r.pages,g,C,]),(0,v.useEffect)(function(){if(u){var e=function(e){var n=e.pageId,o=null==r?void 0:r.pages.find(function(e){return e.id===n});if(!o){console.error("Unable to find page by id: ".concat(n));return}C(e5({event:eE.rc.RecordingStart,shareUrl:l,demoId:t,page:{id:o.id,name:o.name},demoName:x}))};return g.on(E.W6.recordingStartReadyEvent,e)}},[C,u,g,t,x,l,r.pages,]),(0,v.useEffect)(function(){return g.on(E.W6.widgetChangeEvent,function(e){var n=e.widgetId,r=null==a?void 0:a[n],i=r?null==o?void 0:o[r.flowId]:null;if(r&&i){var d=i.widgets.findIndex(function(e){return e===n});C(e5({event:eE.rc.WidgetChanged,demoId:t,shareUrl:l,flow:{id:i.id,name:i.name},widget:{id:r.id,index:d},demoName:x}))}})},[C,a,o,t,l,x,g,]),(0,v.useEffect)(function(){if(c)return g.on(E.W6.widgetReadyEvent,function(e){var n=e.widgetId,r=null==a?void 0:a[n],i=r?null==o?void 0:o[r.flowId]:null;if(r&&i){var d=i.widgets.findIndex(function(e){return e===n});C(e5({event:eE.rc.WidgetReady,demoId:t,shareUrl:l,flow:{id:i.id,name:i.name},widget:{id:r.id,index:d},demoName:x}))}})},[C,a,c,o,t,l,x,g,]),(0,v.useEffect)(function(){return g.on(E.W6.widgetCtaClickEvent,function(e){var n=e.widgetId,r=null==a?void 0:a[n],i=r?null==o?void 0:o[r.flowId]:null;if(r&&i){var d=i.widgets.findIndex(function(e){return e===n});C(e5({event:eE.rc.WidgetCtaClick,demoId:t,shareUrl:l,flow:{id:i.id,name:i.name},widget:{id:r.id,index:d},demoName:x}))}})},[g,C,a,o,t,l,x,]),(0,v.useEffect)(function(){return g.on(E.W6.widgetSecondaryClickEvent,function(e){var n=e.widgetId,r=null==a?void 0:a[n],i=r?null==o?void 0:o[r.flowId]:null;if(r&&i){var d=i.widgets.findIndex(function(e){return e===n});C(e5({event:eE.rc.WidgetSecondaryClick,demoId:t,shareUrl:l,flow:{id:i.id,name:i.name},widget:{id:r.id,index:d},demoName:x}))}})},[g,C,a,o,t,l,x,]),(0,v.useEffect)(function(){return g.on(E.W6.flowChangeEvent,function(e){var n=e.flowId,r=null==o?void 0:o[n];r&&(C(e5({event:eE.rc.FlowChanged,demoId:t,shareUrl:l,flow:{id:r.id,name:r.name},demoName:x})),C(e5({event:eE.rc.ChapterStart,demoId:t,shareUrl:l,chapter:{id:r.id,name:r.name},demoName:x})))})},[a,o,t,l,x,C,g,]),(0,v.useEffect)(function(){return g.on(E.W6.lastWidgetEnterEvent,function(e){var n=e.flowId,r=null==o?void 0:o[n];r&&(C(e5({event:eE.rc.FlowEnd,demoId:t,shareUrl:l,flow:{id:r.id,name:r.name},demoName:x})),C(e5({event:eE.rc.ChapterEnd,demoId:t,shareUrl:l,chapter:{id:r.id,name:r.name},demoName:x})))})},[a,C,o,t,l,x,g,]),j=(0,v.useCallback)(function(e,n){var r=null,i=null,d=null;if(n){var u=null==a?void 0:a[n],c=u?null==o?void 0:o[u.flowId]:null;u&&c&&(r=c.widgets.findIndex(function(e){return e===n})),d=(null==c?void 0:c.name)||null,i=(null==c?void 0:c.id)||null}var s=null!==r&&n?{id:n,index:r}:void 0;C(e5({event:eE.rc.OpenedExternalUrl,demoId:t,shareUrl:l,demoName:x,widget:s,flow:i&&d?{id:i,name:d}:void 0,extUrl:(null==e?void 0:e.url)||"",extUrlTarget:e.target}))},[t,x,C,l,o,a]),U=(0,v.useCallback)(function(e,n){var r=null,i=null,d=null;if(n){var u=null==a?void 0:a[n],c=u?null==o?void 0:o[u.flowId]:null;u&&c&&(r=c.widgets.findIndex(function(e){return e===n})),d=(null==c?void 0:c.name)||null,i=(null==c?void 0:c.id)||null}var s=null!==r&&n?{id:n,index:r}:void 0;C(e5({event:eE.rc.CustomCta,demoId:t,shareUrl:l,demoName:x,widget:s,flow:i&&d?{id:i,name:d}:void 0,extUrl:(null==e?void 0:e.url)||"",extUrlTarget:e.target}))},[t,x,C,l,o,a]),(0,v.useEffect)(function(){var e=[],n=function(e){var n,t=(0,ey.L)({url:e.data.url,target:e.data.target,additionalQuery:null===(n=p.current)||void 0===n?void 0:n.query});t&&j(t)};return e.push(g.on(E.W6.flowlistItemOpenExternalUrlEvent,n)),e.push(g.on(E.W6.widgetOpenExternalUrlEvent,n)),e.push(g.on(E.W6.pageLinkOpenExternalUrlEvent,n)),function(){e.forEach(function(e){return e()})}},[g,p,j]),(0,v.useEffect)(function(){return g.on(E.W6.customCtaClickEvent,function(e){var n,t=e.data,r=e.widgetId,o=(0,ey.L)((0,N.Z)((0,s.Z)({},t),{additionalQuery:null===(n=p.current)||void 0===n?void 0:n.query}));o&&(j(o,r),U(o,r))})},[g,U,j,C,p,]),(0,v.useEffect)(function(){return g.on(E.W6.leadCaptureEvent,function(e){C(e5({event:eE.rc.LeadCaptured,demoId:t,shareUrl:l,demoName:x,lead:e.inputLead}))})},[t,x,l,g,C]),(0,v.useEffect)(function(){return g.on(E.W6.flowlistItemClickEvent,function(e){var n=e.itemId;C(e5({event:eE.rc.FlowlistItemClick,demoId:t,shareUrl:l,demoName:x,flowlistItemId:n}))})},[a,o,t,l,x,g,C,]),(0,v.useEffect)(function(){return g.on(E.W6.walkthroughFinishedEvent,function(){C(e5({event:eE.rc.DemoFinished,demoId:t,shareUrl:l,demoName:x})),m&&C(e5({event:eE.rc.RecordingStop,shareUrl:l,demoId:t,demoName:x}))})},[m,t,l,x,g,C,]),null},e3=new E.NV,e2=function(e){var n,t,r,o,a,i,d,l,u,g,h,C,b=e.demoId,k=e.responseData,j=e.baseUrl,L=e.ssParentPageType,D=e.httpReferer,P=(0,F.useRouter)(),Z=(0,et.Q)(P.asPath).toString(),R=(0,er.$t)({search:Z}),N=R.recording,Q=R.forceHideSteps,V=R.forceHideContent,T=R.scale,O=R.forceStartFlowIndex,M=R.autoPlay,B=R.disableAnimations,G=(0,m.Z)((0,er.s$)({demoId:b,baseUrl:"https://api.storylane.io/api/v1/",search:Z,publishedProject:k,path:P.asPath}),3),z=G[0],H=G[1],J=G[2],K=N?null:null===(n=z.context.project)||void 0===n?void 0:n.flowlists[0],Y=(0,er.zO)({search:Z});(0,er.YP)({demoPageService:J,demoPlayerEventEmitter:e3});var $="".concat(j).concat(P.asPath),ee="".concat($.replace("/demo/","/share/"));(0,v.useEffect)(function(){return e3.on(E.W6.walkthroughFinishedEvent,function(){H({type:eo.F_.FinishWalkthrough})})},[H]),(0,er.HF)({send:H,demoPlayerEventEmitter:e3}),(0,er.Ei)({demoPlayerEventEmitter:e3,hostInfo:Y}),(0,er.rc)({projectId:z.context.project.id,demoPlayerEventEmitter:e3,shareUrl:ee,enabled:N}),(0,er._0)({enabled:N,projectFlows:z.context.flows,demoPlayerEventEmitter:e3});var el=Boolean((null===(t=z.context.project)||void 0===t?void 0:t.kind)===_.lI.Html?null===(r=z.context.project)||void 0===r?void 0:r.feature_flags.responsive_html_demo_player:null===(o=z.context.project)||void 0===o?void 0:o.feature_flags.responsive_image_demo_player),eu=null===(a=z.context.project)||void 0===a?void 0:a.feature_flags.autoscale_vendor_form,ec=(null===(i=z.context.project)||void 0===i?void 0:i.display_config.min_width_warning)&&!N,es=null===(d=z.context.project)||void 0===d?void 0:d.whitelabel,em="".concat("https://app.storylane.io").concat(x.Z.SignUp,"?utm_source=product&utm_medium=in-app&utm_campaign=made-with-storylane-logo"),ef=(0,v.useState)(function(){return(0,W.ok)()}),ev=ef[0],eg=ef[1],ep=(0,v.useState)(function(){return(0,W.NR)()}),eh=ep[0],ew=ep[1],e_=(0,v.useCallback)(function(e){(0,W.sE)(e),eg(e)},[]),ey=(null===(l=z.context.project)||void 0===l?void 0:l.kind)===_.lI.Image&&!B,eE=A("page_id")||(null===(u=z.context.project)||void 0===u?void 0:u.start_page_id),eI=(0,v.useMemo)(function(){var e;return{isResponsiveEnabled:el,isWalkthroughTourDisabled:Q,startFlowIndex:O,startPageId:eE,isLeadCaptured:Boolean(z.context.lead),replayButton:es&&{backgroundColor:es.replay_demo_bg_color,value:es.replay_demo_text,color:es.replay_demo_color},resumeButton:es&&{backgroundColor:es.resume_demo_bg_color,value:es.resume_demo_text,color:es.resume_demo_color},isWidgetAnimationDisabled:B,isWidgetScrollAnimationDisabled:B,isWidgetTranslationAnimationEnabled:Boolean(z.context.project.translation_animation_enabled),isKeepScrollBetweenWidgets:z.context.project.feature_flags.keep_demo_scroll_position,isHtmlPreRenderingEnabled:z.context.project.feature_flags.pre_render_next_page,isShadowDomEnabled:z.context.project.feature_flags.shadow_dom_editing,isRendererHtmlScaleEnabled:Boolean(z.context.project&&(0,ea.w)({displayConfigRendererDimensions:z.context.project.display_config.renderer_dimensions,startPageDimensions:z.context.project.pages[0].dimensions,queryFlagScale:T,projectFlagScale:z.context.project.display_config.auto_scale})),isVendorLeadFormScaleEnabled:eu,watermarkLogoHref:em,watermarkTextHref:"".concat("https://app.storylane.io").concat(x.Z.SignUp,"?utm_source=product&utm_medium=in-app&utm_campaign=made-with-storylane-text"),shouldAddWatermark:Boolean(null==es?void 0:es.brand_name_enabled),shouldDisplayBrandWatermark:Boolean(null==es?void 0:es.product_logo_enabled),isReplayEnabled:null===(C=null===(e=z.context.project)||void 0===e?void 0:e.display_config.replay)||void 0===C||C,autoPlay:V?0:M,isAudioAutoplayEnabled:ev,setIsAudioAutoplayEnabled:e_,isVideoAutoplayEnabled:eh,setIsVideoAutoplayEnabled:ew,isWalkthroughSandboxMode:V}},[el,Q,O,eE,z.context.lead,z.context.project,es,B,T,eu,em,M,ev,e_,eh,V,]),ex=(0,er.HY)({isWalkthroughSandboxMode:V,isRecording:Boolean(N)}),eC=(0,er.W$)({search:Z}),eb=(0,v.useState)({}),ek=eb[0],ej=eb[1],eU=(0,v.useMemo)(function(){var e=z.context.lead?(0,I.getSubstitutionsFromLead)(z.context.lead):{},n=z.context.substitutions.filter(function(e){return e.kind===y.iU.Text}).reduce(function(e,n){var t=n.key,r=n.value;return r&&(e["".concat((0,I.wrapSubstitutionKey)(t))]=r),e},{}),t=Object.keys(ek).reduce(function(e,n){return e["".concat((0,I.wrapSubstitutionKey)(n))]=ek[n],e},{});return(0,s.Z)({},n,eC,t,e)},[z.context.substitutions,z.context.lead,eC,ek,]),eS=(0,v.useMemo)(function(){return z.context.substitutions.filter(function(e){return e.kind===y.iU.Image}).reduce(function(e,n){return e[n.id]=(0,s.Z)({},n),e},{})},[z.context.substitutions]);return(0,er.uG)({demoPlayerEventEmitter:e3,startPageId:eE}),(0,er.AD)({demoPlayerEventEmitter:e3,shareUrl:ee}),(0,er.dH)({scripts:z.context.project.scripts}),(0,f.jsxs)(X,{hostInfo:Y,service:J,demoId:b,queryFlags:R,state:z,shareUrl:ee,demoPlayerEventEmitter:e3,setCrossOriginTextSubstitutions:ej,demoParentType:L,httpReferer:D,children:[(0,f.jsx)(ei.Z,{font:null===(g=z.context.project)||void 0===g?void 0:g.display_config.font}),(0,f.jsxs)(w(),{children:[(0,S.Z)({isResponsiveDemoPlayerEnabled:el,htmlClassName:"sl-player-html"}),(null===(h=z.context.project)||void 0===h?void 0:h.display_config.mobile_viewport)?(0,f.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}):(0,f.jsx)("meta",{name:"viewport",content:"maximum-scale=1.0"})]}),(0,f.jsx)(e1,{}),(0,f.jsx)(e7,{}),(0,f.jsxs)("div",{className:q().root,"data-zoomin":ey,style:{fontFamily:"var(--project-font-family)"},id:ed.GN,children:[z.matches(eo.Ae.LeadFormShown)&&(0,f.jsx)(en,{showWatermark:z.context.project.whitelabel.product_logo_enabled,watermarkLogoHref:em}),(z.matches(eo.Ae.Playback)||z.matches(eo.Ae.LeadFormShown))&&(0,f.jsx)("div",{className:p()(q()["demo-container"],(0,c.Z)({},q()["demo-container--paused"],z.matches(eo.Ae.LeadFormShown))),children:(0,f.jsx)(E.ZP,{project:z.context.project,projectFlowlist:K||null,projectFlows:z.context.flows,textSubstitutions:eU,imageSubstitutions:eS,projectWidgets:z.context.widgets,pages:z.context.project.pages,startPlayback:z.matches(eo.Ae.Playback),config:eI,configNew:ex,hostInfo:Y,emitter:e3})}),z.matches(eo.Ae.Playback)&&ec&&(0,f.jsx)(U,{width:z.context.project.display_config.min_width,message:z.context.project.display_config.min_width_warning_text,backgroundImageUrl:z.context.project.pages[0].thumbnail_url,targetDomId:ed.GN,shareUrl:ee,showFullScreenButton:null===L,showContinueButton:"share"===L||"hub"===L})]})]})}},15079:function(e,n,t){"use strict";t.d(n,{A:function(){return i},B:function(){return r}});var r,o,a=t(2784);function i(e){var n=e.eventAction,t=e.postMessageAction,r=(0,a.useState)(null),o=r[0],i=r[1],d=(0,a.useCallback)(function(e){var t;(null===(t=e.data)||void 0===t?void 0:t.action)===n&&i(e.data.payload)},[n]);return(0,a.useEffect)(function(){try{var e,n;t&&(null===(n=window.top)||void 0===n||n.postMessage(t,"*")),null==window||null===(e=window.top)||void 0===e||e.addEventListener("message",d)}catch(r){}return function(){try{var e;null==window||null===(e=window.top)||void 0===e||e.removeEventListener("message",d)}catch(n){}}},[n,d,t]),{eventData:o}}(o=r||(r={})).StorylaneSharePageDemoReady="storylane-demo-ready",o.StorylaneShareUserId="storylane-share-user-id"},83564:function(e,n,t){"use strict";function r(e){var n=e.displayConfigRendererDimensions,t=e.startPageDimensions,r=e.queryFlagScale,o=e.projectFlagScale;if(!(null===r?o:r))return!1;var a,i=(a=n||t,a.width>0&&a.height>0);return i||console.warn("Fallback embed dimensions with default values."),i}t.d(n,{w:function(){return r}})},47467:function(e){e.exports={root:"DemoPage_root__3LD9J","zoom-in":"DemoPage_zoom-in__5yJak","demo-container":"DemoPage_demo-container__YAit2","demo-container--paused":"DemoPage_demo-container--paused__sNztW",preloader:"DemoPage_preloader__4xx4E"}},87760:function(e){e.exports={root:"DefaultLeadForm_root__Q_cfn",header:"DefaultLeadForm_header__JlSGh",submit:"DefaultLeadForm_submit___Ot8g",formGrid:"DefaultLeadForm_formGrid__tetQW",emailField:"DefaultLeadForm_emailField___6cNr",phoneField:"DefaultLeadForm_phoneField__pEfQG",companyField:"DefaultLeadForm_companyField__cziuY"}},11586:function(e){e.exports={watermark:"LeadForm_watermark__ikXJQ"}},79758:function(e){e.exports={root:"ScreenSizeWarning_root__VR9lk",title:"ScreenSizeWarning_title__7v_WW",buttonFullScreen:"ScreenSizeWarning_buttonFullScreen__b4WLS"}}}]);