(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[69859],{55346:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/demo/[id]",function(){return n(10425)}])},42051:function(e,r,n){"use strict";n.d(r,{Z:function(){return u}});var t=n(52322),o=n(35011),i=n(50203),s=n(86101),a=n(58880),c=n(50085),d=n(27811),l=n.n(d),u=function(e){var r=e.isInitializing,n=e.isPending,d=e.onSignInClick,u=e.error;return r?(0,t.jsx)("div",{className:l().loaderContainer,children:(0,t.jsx)(c.Z,{})}):(0,t.jsx)(i.Z,{autoFocus:!1,hasClose:!1,className:l().popup,children:(0,t.jsxs)("div",{className:l().root,"data-testid":"demo-required-auth",children:[(0,t.jsxs)("div",{className:l().title,children:["Sign In to Storylane to",(0,t.jsx)("br",{})," view the demo"]}),(0,t.jsx)("div",{children:u&&(0,t.jsx)("span",{className:l().error,"data-testid":"demo-required-auth-error",children:u})}),(0,t.jsxs)("div",{className:l().explanation,children:[(0,t.jsxs)("div",{className:l().infoIcon,children:["Why do you need my email?",(0,t.jsxs)(s.Z,{triggerOn:"hover",placement:"top",className:l().tooltip,children:[(0,t.jsx)(s.Z.Trigger,{children:(0,t.jsx)(a.Z,{name:"info",width:14,height:14})}),(0,t.jsxs)(s.Z.Content,{variant:"dark",size:"md-sm-space",innerClassName:l().tooltipContent,children:["The creator restricted this demo only to their",(0,t.jsx)("br",{}),"organization. Sign in to verify your access."]})]})]}),(0,t.jsx)(o.Z,{"data-testid":"demo-required-auth-form-submit",type:"submit",variant:"dark-blue",onClick:d,disabled:n,children:n?"Signing In...":"SIGN In"})]})]})})}},10425:function(e,r,n){"use strict";n.r(r),n.d(r,{__N_SSP:function(){return U},default:function(){return X}});var t=n(98788),o=n(70865),i=n(96670),s=n(22970),a=n(52322),c=n(2784),d=n(25237),l=n.n(d),u=n(97729),p=n.n(u),f=n(82214),m=n(66680),h=n(9669),g=n.n(h),j=n(26297),w=n(50930),x=n(78095),v=n(6899),_=n(87093),b=n(50161),y=new v.fK.Entity("widgets",{},{processStrategy:function(e,r){var n,t;return(0,i.Z)((0,o.Z)({},(0,b.B)((0,b.ox)(e))),{projectId:null!==(n=r.projectId)&&void 0!==n?n:e.projectId,flowId:null!==(t=r.id)&&void 0!==t?t:e.flowId})}}),I=new v.fK.Entity("flows",{widgets:[y]},{processStrategy:function(e,r){return(0,i.Z)((0,o.Z)({},e),{projectId:r.projectId})}}),Z=n(75782),S=n(78617),C=new v.fK.Entity("projects",{flows:[I]}),E=function(e){var r=e.demoId,n=e.password,t=e.requiredEmail,s=e.requiredEmailCode,a=e.additionalQuery,c=e.userIP,d=e.userAgent,l=e.origin,u=e.secret,p=new URLSearchParams;t&&p.set("email",t),s&&p.set("code",s),u&&p.set("secret",u);var f=p.toString(),m="shared/projects/".concat(r)+(f?"?".concat(f):"");return S.b.get(m,{headers:{Authorization:n?"Bearer ".concat(n):"",Origin:l,additionalQuery:a,"X-Forwarded-For":c||"","X-User-Agent":d||""},transformResponse:(0,w.Z)(g().defaults.transformResponse).concat([function(e){return(0,x.S)(e)?e:function(e){if(e.project.kind===_.lI.Image)try{e.project.pages=e.project.pages.map(function(e){var r=(0,o.Z)({},e);return r.scale_config||(r.scale_config=(0,o.Z)({},Z.Oe)),r})}catch(r){console.error("Error transforming image project response - scale config default value not assigned ",r)}try{var n=e.project.flows.map(function(e){return e.id});e.project.flows=e.project.flows.map(function(e){return(0,i.Z)((0,o.Z)({},e),{widgets:e.widgets.map(function(e){return function(e,r){if("options"in e&&"cta"in e.options&&"object"==typeof e.options.cta&&null!==e.options.cta){var n=e.options.cta;if("flowId"in n&&"string"==typeof n.flowId&&!r.includes(n.flowId)){var t=e.options.cta,o=(t.extUrl,t.flowId,t.widgetId,t.extUrlBlank,t.shouldDismiss,(0,j.Z)(t,["extUrl","flowId","widgetId","extUrlBlank","shouldDismiss"]));e.options.cta=o}}return e}(e,n)})})})}catch(t){console.error("Error transforming shared project response - html / image project - cta pointing to non existing flows not validated ",t)}try{e.project.flows=e.project.flows.map(function(e){return(0,i.Z)((0,o.Z)({},e),{widgets:e.widgets.map(function(e){return(0,i.Z)((0,o.Z)({},e),{media_duration:(0,b.ad)(e)})})})})}catch(s){console.error("Error transforming shared project response - media duration not updated",s)}return(0,v.Fv)(e,{project:C})}(e)},])})},P=n(89605),k=n(23089),R=n(43634),q=n(42599),N=n(75762),A=n(34448),D=n(42051),z=n(97756),F=n(98437),O=n(36260),T=l()(function(){return Promise.all([n.e(9137),n.e(65068)]).then(n.bind(n,65068))},{loadableGenerated:{webpack:function(){return[65068]}},ssr:!0}),U=!0,X=function(e){var r,n=e.demoId,d=e.ssEmail,l=e.ssResponseDataStr,u=e.ssResponseErrorCode,h=(e.ssResponseErrorDescription,e.baseUrl),j=e.additionalData,w=e.ssParentPageType,x=e.httpReferer,v="string"==typeof l?JSON.parse(l):null,_=(0,c.useState)(v),b=_[0],y=_[1],I=(0,c.useState)((0,N.q)({code:u,description:""})),Z=I[0],S=I[1],C=Z.isPasswordProtected,U=Z.isPasswordExpired,X=Z.isEmailProtected,B=Z.isEmailConfirmationRequired,K=Z.isNotAuthenticated,M=Z.errorDescription,G=(0,c.useState)(!1),L=G[0],Q=G[1];(0,O.Xm)();var W,H,J,V,Y=(0,c.useCallback)((r=(0,t.Z)(function(e){var r,t,o,i,a,c,d,l,u;return(0,s.__generator)(this,function(s){switch(s.label){case 0:r=e.hashedPassword,t=e.email,o=e.emailCode,i=e.secret,s.label=1;case 1:return s.trys.push([1,3,,4]),Q(!0),[4,E({demoId:n,password:r,requiredEmail:t,requiredEmailCode:o,secret:i,origin:h})];case 2:return y({data:s.sent().data}),S((0,N.q)({})),Q(!1),[2,{isSuccess:!0,error:void 0}];case 3:if(c=s.sent(),Q(!1),g().isAxiosError(c)&&(0,m.Rp)(null===(d=c.response)||void 0===d?void 0:d.data))return[2,{isSuccess:!1,error:(0,N.q)({response:null===(l=c.response)||void 0===l?void 0:l.data})}];return console.error(c),[2,{isSuccess:!1,error:void 0}];case 4:return[2]}})}),function(e){return r.apply(this,arguments)}),[h,n]),$=(0,c.useCallback)((W=(0,t.Z)(function(e){var r,t,o,i,a;return(0,s.__generator)(this,function(s){switch(s.label){case 0:return t=btoa(e),o=(0,A.Mo)(n),i=(0,A.Zf)(n),[4,Y({hashedPassword:t,email:o,emailCode:i})];case 1:return((a=s.sent()).isSuccess||(null===(r=a.error)||void 0===r?void 0:r.isEmailProtected))&&(0,A.Vq)(n,t),a.error&&(a.error.isEmailProtected&&(a.error.errorDescription=""),S(a.error)),[2]}})}),function(e){return W.apply(this,arguments)}),[n,Y]),ee=(0,c.useCallback)((H=(0,t.Z)(function(e){var r,t,o;return(0,s.__generator)(this,function(i){switch(i.label){case 0:return t=(0,A.lI)(n),[4,Y({hashedPassword:t,email:e})];case 1:return((o=i.sent()).isSuccess||(null===(r=o.error)||void 0===r?void 0:r.isEmailConfirmationRequired))&&(0,A.dy)(n,e),o.error&&(o.error.isEmailConfirmationRequired&&(o.error.errorDescription=""),S(o.error)),[2]}})}),function(e){return H.apply(this,arguments)}),[n,Y]),er=(0,c.useCallback)((J=(0,t.Z)(function(e){var r,t,o;return(0,s.__generator)(this,function(i){switch(i.label){case 0:return r=(0,A.lI)(n),t=(0,A.Mo)(n),[4,Y({hashedPassword:r,email:t,emailCode:e})];case 1:return(o=i.sent()).isSuccess&&(0,A.ku)(n,e),o.error&&S(o.error),[2]}})}),function(e){return J.apply(this,arguments)}),[n,Y]),en=(0,c.useCallback)((V=(0,t.Z)(function(e){var r;return(0,s.__generator)(this,function(n){switch(n.label){case 0:return[4,Y({secret:e})];case 1:return(r=n.sent()).error&&S(r.error),[2,r]}})}),function(e){return V.apply(this,arguments)}),[Y]),et=(0,c.useCallback)(function(){S((0,i.Z)((0,o.Z)({},Z),{errorDescription:""}))},[Z,S]),eo=(0,c.useCallback)(function(){(0,A.bl)(n),globalThis.location.reload()},[n]),ei=(0,z.z)(),es=ei.isLoading,ea=ei.secret,ec=ei.openAuthWindow,ed=(0,c.useState)(K),el=ed[0],eu=ed[1];if((0,c.useEffect)(function(){!K||ea||es||eu(!1)},[K,ea,es]),(0,c.useEffect)(function(){K&&ea&&en(ea).then(function(){eu(!1)})},[K,ea,en]),K)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p(),{children:(0,f.Z)({isResponsiveDemoPlayerEnabled:!1,htmlClassName:"sl-player-html"})}),(0,a.jsx)(P.Z,{font:null}),(0,a.jsx)(D.Z,{isInitializing:el,isPending:L,onSignInClick:ec,error:ea?"Authentication process failed. Please try again or contact support.":""})]});if(C||X||B){var ep=null;return C?ep=(0,a.jsx)(k.Z,{isSubmitting:L,onSubmit:$,error:M,onClearError:et}):X?ep=(0,a.jsx)(R.Z,{isSubmitting:L,onSubmit:ee,error:M,onClearError:et}):B&&(ep=(0,a.jsx)(q.Z,{isSubmitting:L,onSubmit:er,error:M,onClearError:et,email:(0,A.Mo)(n)||d,onClose:eo})),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p(),{children:(0,f.Z)({isResponsiveDemoPlayerEnabled:!1,htmlClassName:"sl-player-html"})}),(0,a.jsx)(P.Z,{font:null}),ep]})}return U?(0,a.jsx)(F.Z,{projectId:null==j?void 0:j.projectId,demoId:n,subject:"link"}):b?(0,a.jsx)(T,{baseUrl:h,httpReferer:x,responseData:b.data,demoId:n,ssParentPageType:w}):(0,a.jsx)(F.Z,{projectId:null==j?void 0:j.projectId,demoId:n,subject:"link"})}},82214:function(e,r,n){"use strict";n.d(r,{Z:function(){return i}});var t=n(52322),o=n(59911),i=function(e){var r=e.isResponsiveDemoPlayerEnabled,n=e.htmlClassName,i="max-width: 1230px";r&&(i="min-width: ".concat(o.d+1,"px"));var s="\n      @media (".concat(i,") {\n        @media only screen and (min-aspect-ratio: 1/1) { \n          html, .").concat(n," {\n            font-size: max(4px, 1.3vw);\n          }\n        }\n      }"),a="\n      @media (min-width: 1231px) and (max-width: 1900px) {\n        html, .".concat(n," {\n          font-size: 16px;\n        }\n      }"),c="\n      @media (min-width: 1901px){\n        html, .".concat(n," {\n          font-size: 20px;\n          font-size: min(20px, 1vw);\n        }\n      }\n    "),d="       \n      @media only screen and (max-aspect-ratio: 1/1){\n        html, .".concat(n," {\n          font-size: 16px;\n        }\n      }"),l=[s,a,c,d,].join("\n");return(0,t.jsx)("style",{type:"text/css",children:l})}},27811:function(e){e.exports={popup:"RequiredAuthScreen_popup__tvvTC",root:"RequiredAuthScreen_root__KjHFO",title:"RequiredAuthScreen_title__F8327",description:"RequiredAuthScreen_description__ybtFs",explanation:"RequiredAuthScreen_explanation__1N_Ya",infoIcon:"RequiredAuthScreen_infoIcon__Ihkht",loaderContainer:"RequiredAuthScreen_loaderContainer__dP264",error:"RequiredAuthScreen_error__duCPy"}}},function(e){e.O(0,[69859],function(){e.E(69657)},5),e.O(0,[43378,32633,21615,69947,54496,24408,78965,88266,96994,49774,92888,40179],function(){return e(e.s=55346)}),_N_E=e.O()}]);