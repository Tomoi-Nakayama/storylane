(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[65068],{65068:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return e2}});var r,o,a,i,d,l,u,c=t(47842),s=t(70865),m=t(66383),f=t(52322),v=t(2784),g=t(12524),p=t.n(g),h=t(97729),w=t.n(h),_=t(87093),y=t(938),E=t(84515),I=t(93316),C=t(66351),x=t(88744),b=t(35011),k=t(79758),j=t.n(k),S=function(e){var n=e.width,t=e.message,r=e.backgroundImageUrl,o=e.shareUrl,a=e.showFullScreenButton,i=e.showContinueButton,d=(0,v.useState)(!1),l=d[0],u=d[1],c=(0,v.useState)(!1),s=c[0],m=c[1];(0,v.useEffect)(function(){if(!l){var e=(0,x.Z)(function(){m(window.innerWidth<=n)},300,{leading:!1,trailing:!0});return e(),window.addEventListener("resize",e,!0),function(){window.removeEventListener("resize",e,!0)}}},[n,l]);var g=(0,v.useCallback)(function(){window.open("".concat(o),"_blank")},[o]);return l||!s?null:(0,f.jsxs)("div",{className:j().root,style:{backgroundImage:"url(".concat(r,")")},children:[(0,f.jsx)("h1",{className:j().title,children:void 0===t?"Your screen size looks too small for the demo experience":t}),i&&(0,f.jsx)(b.Z,{variant:"outline",onClick:function(){return u(!0)},children:"I Can Continue"}),a&&(0,f.jsx)(b.Z,{variant:"outline",onClick:g,children:"View Full Screen"})]})},U=t(82214),F=t(5632),W=t(99913),L=t(17627),D=function(e,n){return new URLSearchParams(e).get(n)},P=function(e){var n=window.location,t=(0,v.useState)(function(){return D(n.search,e)}),r=t[0],o=t[1];return(0,v.useEffect)(function(){var t=function(){o(D(n.search,e))};return(0,L.on)(window,"popstate",t),(0,L.on)(window,"pushstate",t),(0,L.on)(window,"replacestate",t),function(){(0,L.S1)(window,"popstate",t),(0,L.S1)(window,"pushstate",t),(0,L.S1)(window,"replacestate",t)}},[n.search,e]),r},A=function(){return null},Z=L.jU?P:A,R=t(47467),q=t.n(R),N=t(96670),Q=t(61191),V=t(87997),T=t(61471),O=t(63955),B=t(59911),M=t(57144),G=t(87760),z=t.n(G),H=["first_name","last_name","email","company_name","phone",],J=function(e){var n=e.onSubmit,t=e.formConfig,r=(0,v.useState)(!1),o=r[0],a=r[1],i=(0,O.cI)({mode:"onChange"}),d=i.register,l=i.handleSubmit,u=i.formState,c=(0,v.useMemo)(function(){return t.fields.reduce(function(e,n){return e[H.findIndex(function(e){return e===n})]=n,e},[])},[t.fields]),m=(0,v.useCallback)(function(e){try{a(!0),n((0,N.Z)((0,s.Z)({},e),{source:T.M.InternalForm}))}catch(t){a(!1),console.error(t)}},[n]);return(0,f.jsxs)("div",{className:z().root,children:[(0,f.jsx)("h1",{className:z().header,children:t.title||"Try our Product Demo"}),(0,f.jsxs)("form",{onSubmit:l(m),className:z().formGrid,"data-testid":"lead-form",children:[c.map(function(e){var n,t,r,o,a;switch(e){case"email":return(0,f.jsx)(M.Z,(0,s.Z)({label:"Work Email",error:null===(n=u.errors.email)||void 0===n?void 0:n.message,type:"email",className:z().emailField,placeholder:"john.doe.work@company.com"},d("email",{required:"Email is required",pattern:{value:B.hH,message:"Invalid email"}})),"email");case"company_name":return(0,f.jsx)(M.Z,(0,s.Z)({label:"Company Name",error:null===(t=u.errors.company_name)||void 0===t?void 0:t.message,className:z().companyField},d("company_name",{required:"Company name is required"})),"company_name");case"first_name":return(0,f.jsx)(M.Z,(0,s.Z)({label:"First Name",error:null===(r=u.errors.first_name)||void 0===r?void 0:r.message,placeholder:"John"},d("first_name",{required:"First Name is required",maxLength:{value:100,message:"First name is too long"}})),"first_name");case"last_name":return(0,f.jsx)(M.Z,(0,s.Z)({label:"Last Name",error:null===(o=u.errors.last_name)||void 0===o?void 0:o.message,placeholder:"Doe"},d("last_name",{required:"Last Name is required",maxLength:{value:100,message:"Last name is too long"}})),"last_name");case"phone":return(0,f.jsx)(M.Z,(0,s.Z)({label:"Mobile",error:null===(a=u.errors.phone)||void 0===a?void 0:a.message,className:z().phoneField},d("phone",{required:"Mobile is required",maxLength:{value:100,message:"Last name is too long"}})),"phone")}}),(0,f.jsx)("button",{className:z().submit,type:"submit",disabled:o||!u.isValid||u.isSubmitting,children:t.cta||"Continue"})]})]})},K=t(11586),Y=t.n(K),$=(0,v.createContext)(null),X=function(e){var n=e.state,t=e.queryFlags,r=e.shareUrl,o=e.children,a=e.demoPlayerEventEmitter,i=e.demoId,d=e.service,l=e.hostInfo,u=e.setCrossOriginTextSubstitutions,c=e.demoParentType,s=e.httpReferer;return(0,f.jsx)($.Provider,{value:{demoId:i,queryFlags:t,state:n,shareUrl:r,demoPlayerEventEmitter:a,hostInfo:l,service:d,setCrossOriginTextSubstitutions:u,demoParentType:c,httpReferer:s},children:o})},ee=function(){return(0,v.useContext)($)},en=function(e){var n,t=e.showWatermark,r=e.watermarkLogoHref,o=ee(),a=o.state,i=o.service,d=function(e){i.send({type:"LEAD_CREATED",lead:(0,N.Z)((0,s.Z)({},e.lead),{source:T.M.VendorForm})})},l=function(e){i.send({type:"LEAD_CREATED",lead:e})},u=a.context.leadFormConfig;return(0,f.jsxs)(f.Fragment,{children:["internal"===u.source?(0,f.jsx)(J,{onSubmit:l,formConfig:u.internal_form}):(0,f.jsx)(Q.Z,{projectId:a.context.project.id,onSubmit:d,width:u.internal_form.width,height:u.internal_form.height,backgroundColor:u.internal_form.backgroundColor,urlQuery:void 0}),t&&(0,f.jsx)("div",{className:Y().watermark,children:(0,f.jsx)(V.Z,{testId:"lead-form-watermark",href:r})})]})},et=t(82998),er=t(36260),eo=t(11963),ea=t(83564),ei=t(89605),ed=t(65478),el=t(34135),eu=t(8535),ec=t(15103),es=t(87032),em=t(68221),ef=t(93122),ev=t(97885),eg=t(35946),ep=t(83496),eh=t(3355),ew=t(82095),e_=t(13004),ey=t(23884),eE=t(24845),eI=t(34448),eC=t(15079),ex=t(50930),eb=t(95957),ek=t(97386);(u=r||(r={})).DispatchAnalyticsEvent="dispatchAnalyticsEvent",u.ReceivedUserConsent="receivedUserConsent",u.DocumentInViewport="documentInViewport";var ej,eS=(0,eb.C)({id:"demoPageAnalytics",initial:"releaseGate",context:{isDocumentInViewport:!1,isUserCookieConsentReceived:!1,waitUserCookieConsent:!1,waitDocumentInViewport:!0,events:[],disabled:!1},states:{releaseGate:{always:[{cond:function(e){return e.disabled},target:"disabled"},{target:"release",cond:function(e){var n=!e.waitDocumentInViewport||e.isDocumentInViewport,t=!e.waitUserCookieConsent||e.isUserCookieConsentReceived;return n&&t}},{target:"wait"},]},wait:{on:{dispatchAnalyticsEvent:{internal:!0,actions:"putEventIntoQueue"},receivedUserConsent:{target:"releaseGate",actions:"receivedUserConsentAction"},documentInViewport:{target:"releaseGate",actions:"documentInViewportAction"}}},release:{entry:["releaseQueuedEvents"],on:{dispatchAnalyticsEvent:{internal:!0,actions:function(e,n){n.fn()}}}},disabled:{type:"final"}}},{actions:{documentInViewportAction:(0,ek.f0)(function(){return{isDocumentInViewport:!0}}),receivedUserConsentAction:(0,ek.f0)(function(){return{isUserCookieConsentReceived:!0}}),releaseQueuedEvents:(0,ek.f0)(function(e){return e.events.forEach(function(e){e()}),{events:[]}}),putEventIntoQueue:(0,ek.f0)(function(e,n){return n.type===r.DispatchAnalyticsEvent?{events:(0,ex.Z)(e.events).concat([n.fn])}:{}})}});(ej=o||(o={})).QueueEvent="QUEUE_EVENT",ej.GaInitialized="GA_INITIALIZED";var eU,eF,eW=(0,eb.C)({id:"vendorAnalytics",initial:"queueing",context:{events:[],isGaInitialized:!1,gaMeasurementId:"",clientId:null},states:{queueing:{on:(i={},(0,c.Z)(i,o.QueueEvent,{actions:(0,ek.f0)({events:function(e,n){return(0,ex.Z)(e.events).concat([n.fn])}})}),(0,c.Z)(i,o.GaInitialized,{target:"ready",actions:[(0,ek.f0)({isGaInitialized:!0,gaMeasurementId:function(e,n){return n.gaMeasurementId},clientId:function(e,n){return null!==(a=n.clientId)&&void 0!==a?a:null}}),function(e,n){var t,r,o,a,i,d;r=document,o=n.gaMeasurementId,a=null!==(t=n.clientId)&&void 0!==t?t:void 0,(i=r.createElement("script")).async=!0,i.src="https://www.googletagmanager.com/gtag/js?id=".concat(o),r.head.appendChild(i),(d=r.createElement("script")).id="ga-script",d.textContent="\n      window.dataLayer = window.dataLayer || [];\n      function gtag(){dataLayer.push(arguments);}\n      gtag('js', new Date());\n      gtag('config', '".concat(o,"', ").concat(JSON.stringify((0,s.Z)({cookie_flags:"samesite=none;secure",send_page_view:!1},a?{client_id:a}:{})),");\n    "),r.head.appendChild(d)},]}),i)},ready:{entry:function(e){return e.events.forEach(function(e){return e()})},on:(0,c.Z)({},o.QueueEvent,{actions:function(e,n){return n.fn()}})}}}),eL=t(47309);(eU=d||(d={})).Full="full",eU.Lite="lite",(eF=l||(l={})).DemoOpened="sl_demo_open",eF.WidgetChanged="sl_step_view",eF.WidgetCtaClick="sl_primary_cta",eF.WidgetSecondaryClick="sl_secondary_cta",eF.FlowChanged="sl_flow_start",eF.FlowEnd="sl_flow_end",eF.ChapterStart="sl_chapter_start",eF.ChapterEnd="sl_chapter_end",eF.PageChanged="sl_page_view",eF.LeadCaptured="sl_lead_identify",eF.OpenedExternalUrl="sl_open_external_url",eF.FlowlistItemClick="sl_checklist_item_view",eF.DemoFinished="sl_demo_finished",eF.CustomCta="sl_convert_cta",eF.DemoEngaged15="sl_15_demo_engaged",eF.DemoEngaged25="sl_25_demo_engaged",eF.DemoEngaged50="sl_50_demo_engaged",eF.DemoEngaged75="sl_75_demo_engaged",eF.DemoEngaged100="sl_100_demo_engaged";var eD=new Map([[15,l.DemoEngaged15],[25,l.DemoEngaged25],[50,l.DemoEngaged50],[75,l.DemoEngaged75],[100,l.DemoEngaged100],]);function eP(e){return{create:function(n){return{name:e,payload:n}},match:function(n){return n.name===e}}}var eA=eP(l.DemoOpened),eZ=eP(l.DemoFinished),eR=eP(l.FlowlistItemClick),eq=eP(l.FlowEnd),eN=eP(l.ChapterEnd),eQ=eP(l.PageChanged),eV=eP(l.LeadCaptured),eT=eP(l.FlowChanged),eO=eP(l.ChapterStart),eB=eP(l.WidgetChanged),eM=eP(l.WidgetCtaClick),eG=eP(l.WidgetSecondaryClick),ez=eP(l.OpenedExternalUrl),eH=eP(l.CustomCta),eJ=function(e){return eP(e)},eK=t(62326),eY=function(e,n){var t=Array.from(eD.keys()).sort(function(e,n){return n-e}),r=Math.max(e.percentViewed,"tick"===n.type?e.secondsSpent+1:e.secondsSpent),o=t.find(function(e){return r>=e});return!o||e.reachedEngagementLevel[0]>=o?e.reachedEngagementLevel:[o,!1]},e$=(0,eb.C)({id:"demoEngagementAnalyticsTracking",initial:"initial",context:{percentViewed:0,secondsSpent:0,reachedEngagementLevel:[0,!1],enabled:!0},states:{initial:{always:[{cond:function(e){return!1===e.enabled},target:"completed"},{target:"waitingForUserActivation",cond:function(e){return!0===e.enabled}},]},waitingForUserActivation:{invoke:{src:function(){return function(e){var n,t;return n=function(){return e({type:"start"})},t=function(){try{var e=window.navigator.userActivation.isActive,t=window.navigator.userActivation.hasBeenActive;if(e||t)return n(),!0;return!1}catch(r){return!0}},(0,eK.Uz)({cb:t,interval:500}),function(){(0,eK.NE)(t)}}}},on:{start:{target:"tracking"},viewProgress:{actions:(0,ek.f0)({percentViewed:function(e,n){return n.percentValue}})}}},tracking:{invoke:{src:function(){return function(e){var n=setInterval(function(){e({type:"tick"})},1e3);return function(){return clearInterval(n)}}}},on:{tick:[{actions:["sendEngagementAnalyticsEvent"],cond:function(e){return Math.max(e.percentViewed,e.secondsSpent)>=100},target:"completed"},{actions:[(0,ek.f0)(function(e,n){return{secondsSpent:e.secondsSpent+1,reachedEngagementLevel:eY(e,n)}}),"sendEngagementAnalyticsEvent",]},],viewProgress:[{actions:["sendEngagementAnalyticsEvent"],cond:function(e){return Math.max(e.percentViewed,e.secondsSpent)>=100},target:"completed"},{actions:[(0,ek.f0)(function(e,n){return{percentViewed:Math.max(e.percentViewed,n.percentValue),reachedEngagementLevel:eY(e,n)}}),"sendEngagementAnalyticsEvent",]},]}},completed:{type:"final"}}}),eX=t(12507),e0=t(74714),e1=function(){var e,n,t,a,i,u,c,m,f,g,p,h,w,y=ee(),I=y.state,C=y.shareUrl,x=y.demoId,b=y.queryFlags,k=y.service,j=y.demoParentType,S=(n=(e={disabled:b.recording,waitUserCookieConsent:null===j&&I.context.project.cookie_consent_required}).disabled,t=e.waitUserCookieConsent,a=(0,el.k)(eS,{context:{disabled:n,waitUserCookieConsent:t}}),i=(0,v.useMemo)(function(){return function(e){a.send({type:r.DispatchAnalyticsEvent,fn:e})}},[a]),u=(0,v.useCallback)(function(){a.send(r.ReceivedUserConsent)},[a]),c=(0,v.useCallback)(function(){a.send(r.DocumentInViewport)},[a]),{dispatch:i,onCookieConsentReceived:u,onDocumentInViewport:c}),U=S.dispatch,F=S.onCookieConsentReceived,W=S.onDocumentInViewport,L=(f=(m=(0,v.useState)(!1))[0],g=m[1],(0,v.useEffect)(function(){if(!f)try{var e=(0,ec.Z)({root:null,element:window.document.documentElement,threshold:[.1,.2,.3,.4,.5,.6,.7,.8,.9,1],cb:function(n){n[0].intersectionRatio>.5&&(g(!0),e())}});return e}catch(n){g(!0)}},[f]),f);(0,v.useEffect)(function(){L&&W()},[L,W]);var D,P,A,Z,R,q,Q,V,T,O,B,M,G,z,H,J,K,Y,$,X,en,et,er,eo,ea,ei,ed,ex,eb,ej,eU,eF,eP,eK,eY,e1,e6,e5,e7,e8,e2,e3,e9,e4,ne,nn,nt,nr,no,na,ni,nd,nl,nu,nc,ns,nm,nf,nv,ng,np,nh,nw,n_,ny,nE,nI,nC,nx,nb,nk,nj,nS,nU,nF,nW,nL,nD=(h=(p=(0,v.useState)(!1))[0],w=p[1],(0,v.useEffect)(function(){var e=function(e){try{var n;(null===(n=e.data)||void 0===n?void 0:n.message)===eE.NX&&w(!0)}catch(t){console.error(t)}};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}},[]),{userCookieConsentReceived:h}).userCookieConsentReceived;return(0,v.useEffect)(function(){nD&&F()},[F,nD]),P=(D={project:I.context.project,query:b.query,demoId:x,baseUrl:"https://api.storylane.io/api/v1/",dispatchFn:U,service:k}).demoId,A=D.query,Z=D.baseUrl,R=D.project,q=D.dispatchFn,Q=D.service,V=(0,eu.v)(Q,function(e){return e.context.lead}),T=(0,v.useRef)(V),O=(0,v.useRef)((0,eI.gP)(P)),T.current=V,M=(B=ee()).hostInfo,G=B.demoPlayerEventEmitter,z=B.httpReferer,H=(0,eC.A)({eventAction:eC.B.StorylaneShareUserId,postMessageAction:eC.B.StorylaneSharePageDemoReady}).eventData,J=(0,v.useRef)(void 0),(0,v.useEffect)(function(){J.current=null==H?void 0:H.user_id},[null==H?void 0:H.user_id]),(0,v.useEffect)(function(){var e=function(e){try{var n,t,r,o,a,i,d;if((null===(n=e.data)||void 0===n?void 0:n.message)===eE.rf&&Boolean(null===(t=e.data)||void 0===t?void 0:t.payload)&&"object"==typeof(null===(r=e.data)||void 0===r?void 0:r.payload))q(function(){return(0,e0.g)({demoId:P,projectId:R.id,event:eL.Q.LeadCaptured,query:A,clientTracking:e.data.payload,baseUrl:Z,userId:J.current,leadInfo:T.current,sessionId:O.current.id})});else if(Boolean(null===(o=e.data)||void 0===o?void 0:o.tracking)&&(null===(a=e.data)||void 0===a?void 0:a.source)===eE.kf){var l=Boolean(e.data.ref)&&"string"==typeof e.data.ref.referrer?e.data.ref.referrer:null,u=Boolean(e.data.ref)&&"string"==typeof e.data.ref.originalReferrer?e.data.ref.originalReferrer:null;q(function(){return(0,e0.n)({projectId:R.id,companyId:R.company_id,demoId:P,tracking:e.data.tracking,referrer:l,originalReferrer:u,baseUrl:Z})})}else Boolean(null===(i=e.data)||void 0===i?void 0:i.lead)&&(null===(d=e.data)||void 0===d?void 0:d.source)===eE.Tl&&q(function(){return(0,e0.g)({demoId:P,projectId:R.id,event:eL.Q.LeadCaptured,query:A,clientTracking:e.data.lead,baseUrl:Z,userId:J.current,leadInfo:T.current,sessionId:O.current.id})})}catch(c){console.error(c)}};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}},[q,R,P,A,M,Z]),K=(0,v.useCallback)(function(){return q(function(){var e,n;return(0,e0.g)({demoId:P,projectId:R.id,event:eL.Q.Interacted,query:A,hostUrl:null===(e=M.current)||void 0===e?void 0:e.url,urlQuery:null===(n=M.current)||void 0===n?void 0:n.query,baseUrl:Z,userId:J.current,leadInfo:T.current,sessionId:O.current.id})})},[q,R,P,A,M,Z,J,T,]),$=(Y=(0,v.useState)(!1))[0],X=Y[1],en=(0,v.useCallback)(function(){try{var e=window.navigator.userActivation.isActive,n=window.navigator.userActivation.hasBeenActive;if(e||n)return X(!0),null==K||K(),!0;return!1}catch(t){return!0}},[K]),(0,eX.Z)({cb:en,disabled:$,interval:500}),(0,v.useEffect)(function(){(0,eI.gP)(P).state[eL.Q.Opened]||q(function(){var e,n;return(0,e0.g)({demoId:P,projectId:R.id,event:eL.Q.Opened,query:A,hostUrl:null===(e=M.current)||void 0===e?void 0:e.url,urlQuery:null===(n=M.current)||void 0===n?void 0:n.query,baseUrl:Z,userId:J.current,leadInfo:T.current,referrer:z,sessionId:O.current.id})})},[q,R,P,A,M,Z,z]),et="flv_"+P,eo=null==(er=null==R?void 0:R.flowlists[0])?void 0:er.items.map(function(e){return[e.id,!1]}),ea=(0,eh.Z)(eo),(0,v.useEffect)(function(){if(Object.keys(ea).length){var e=eg.jj.getItem(et),n=JSON.parse(e||"{}"),t=(0,ep.Z)(Object.keys(n),Object.keys(ea));(!e||t.length>0)&&eg.jj.setItem(et,JSON.stringify(ea))}},[P,ea,et,R]),(0,v.useEffect)(function(){return G.on(E.W6.flowChangeEvent,function(e){var n=e.flowId;return q(function(){var e,t;return(0,e0.g)({demoId:P,projectId:R.id,event:eL.Q.FlowStarted,targetId:n,query:A,hostUrl:null===(e=M.current)||void 0===e?void 0:e.url,urlQuery:null===(t=M.current)||void 0===t?void 0:t.query,baseUrl:Z,userId:J.current,leadInfo:T.current,sessionId:O.current.id})})})},[G,q,R,P,A,M,Z,]),(0,v.useEffect)(function(){return G.on(E.W6.walkthroughFinishedEvent,function(){q(function(){var e,n;return(0,e0.g)({demoId:P,projectId:R.id,event:eL.Q.Closed,query:A,hostUrl:null===(e=M.current)||void 0===e?void 0:e.url,urlQuery:null===(n=M.current)||void 0===n?void 0:n.query,baseUrl:Z,userId:J.current,leadInfo:T.current,sessionId:O.current.id})})})},[G,P,q,R.id,R.company_id,A,M,Z,]),(0,v.useEffect)(function(){return G.on(E.W6.widgetChangeEvent,function(e){var n=e.widgetId;return q(function(){var e,t;return(0,e0.g)({demoId:P,projectId:R.id,event:eL.Q.WidgetViewed,targetId:n,query:A,hostUrl:null===(e=M.current)||void 0===e?void 0:e.url,urlQuery:null===(t=M.current)||void 0===t?void 0:t.query,baseUrl:Z,userId:J.current,leadInfo:T.current,sessionId:O.current.id})})})},[G,q,R,P,A,M,Z,]),(0,v.useEffect)(function(){return G.on(E.W6.flowlistItemClickEvent,function(e){var n=e.itemId,t=eg.jj.getItem(et);if(t){var r=JSON.parse(t);r[n]=!0,eg.jj.setItem(et,JSON.stringify(r)),Object.values(r).every(function(e){return e})&&er&&q(function(){var e,n;return(0,e0.g)({demoId:P,projectId:R.id,event:eL.Q.FlowlistCompleted,targetId:er.id,query:A,hostUrl:null===(e=M.current)||void 0===e?void 0:e.url,urlQuery:null===(n=M.current)||void 0===n?void 0:n.query,baseUrl:Z,userId:J.current,leadInfo:T.current,sessionId:O.current.id})})}})},[G,q,R,P,A,M,Z,er,et,]),(0,v.useEffect)(function(){return G.on(E.W6.lastWidgetEnterEvent,function(e){var n=e.flowId;q(function(){var e,t;return(0,e0.g)({demoId:P,projectId:R.id,event:eL.Q.FlowEnded,targetId:n,query:A,hostUrl:null===(e=M.current)||void 0===e?void 0:e.url,urlQuery:null===(t=M.current)||void 0===t?void 0:t.query,baseUrl:Z,userId:J.current,leadInfo:T.current,sessionId:O.current.id})})})},[q,G,R,P,A,M,Z,]),(0,v.useEffect)(function(){if(R.kind!==_.lI.Image)return G.on(E.W6.pageChangeEvent,function(e){q(function(){var n,t;return(0,e0.g)({demoId:P,projectId:R.id,event:eL.Q.PageViewed,targetId:e.pageId,query:A,hostUrl:null===(n=M.current)||void 0===n?void 0:n.url,urlQuery:null===(t=M.current)||void 0===t?void 0:t.query,baseUrl:Z,userId:J.current,leadInfo:T.current,sessionId:O.current.id})})})},[q,G,R,P,A,M,Z,]),(0,v.useEffect)(function(){var e=function(e,n){if(e.isKnownLead&&!(null==n?void 0:n.isKnownLead)&&e.lead){var t=(0,s.Z)({},e.lead);q(function(){return(0,e0.g)({projectId:R.id,baseUrl:Z,demoId:P,event:eL.Q.LeadCaptured,leadCapturedInfo:(0,s.Z)({external_user_id:t.externalId,email:t.email},(0,ew.Z)(t,["externalId","email"])),leadInfo:T.current,sessionId:O.current.id})})}};return Q.onChange(e),function(){Q.off(e)}},[Q,q,R.id,P,Z,G,]),ei=(0,v.useCallback)(function(e,n){q(function(){var t,r;return(0,e0.g)({demoId:P,projectId:R.id,event:eL.Q.CtaOpened,targetId:n,extUrl:e,query:A,hostUrl:null===(t=M.current)||void 0===t?void 0:t.url,urlQuery:null===(r=M.current)||void 0===r?void 0:r.query,baseUrl:Z,userId:J.current,leadInfo:T.current,sessionId:O.current.id})})},[q,R,P,A,M,Z]),(0,v.useEffect)(function(){return G.on(E.W6.flowlistItemOpenExternalUrlEvent,function(e){var n,t=e.data,r=e.itemId,o=(0,ey.L)((0,N.Z)((0,s.Z)({},t),{additionalQuery:null===(n=M.current)||void 0===n?void 0:n.query}));o&&ei(o.url,r)})},[G,M,ei]),(0,v.useEffect)(function(){return G.on(E.W6.widgetOpenExternalUrlEvent,function(e){var n,t=e.data,r=e.widgetId,o=(0,ey.L)((0,N.Z)((0,s.Z)({},t),{additionalQuery:null===(n=M.current)||void 0===n?void 0:n.query}));o&&ei(o.url,r)})},[G,M,ei]),(0,v.useEffect)(function(){return G.on(E.W6.customCtaClickEvent,function(e){var n,t=e.data,r=e.projectId,o=(0,ey.L)((0,N.Z)((0,s.Z)({},t),{additionalQuery:null===(n=M.current)||void 0===n?void 0:n.query}));o&&ei(o.url,r)})},[G,ei,M]),ex=(ed={enabled:Boolean(I.context.project.ga_measurement_id),project:I.context.project,flows:I.context.flows,widgets:I.context.widgets,shareUrl:C,baseUrl:"https://api.storylane.io/api/v1/",demoId:x,query:b.query,service:k,demoParentType:j,dispatchFn:U}).enabled,eb=ed.demoId,ej=ed.project,eU=ed.flows,eF=ed.widgets,eP=ed.shareUrl,eK=ed.service,eY=ed.demoParentType,e1=ed.dispatchFn,e5=(e6=ee()).hostInfo,e7=e6.demoPlayerEventEmitter,e8=e6.httpReferer,e2=(null==ej?void 0:ej.name)||"",e3=ej.ga_lite_enabled?d.Lite:d.Full,nk=null===(nb=(nx={demoParentType:eY}).demoParentType),nS=(nj=(0,v.useState)(void 0))[0],nU=nj[1],nW=(nF=(0,v.useState)("hub"===nb||"share"===nb))[0],nL=nF[1],e4=(e9=((0,v.useEffect)(function(){if(nk){var e=setTimeout(function(){nL(!0)},5e3),n=function(n){var t;if((null===(t=n.data)||void 0===t?void 0:t.source)===eE.WZ){var r,o,a=null===(r=n.data)||void 0===r?void 0:null===(o=r.host)||void 0===o?void 0:o.gaClientId;a&&(nU(a),nL(!0),clearTimeout(e))}};return window.addEventListener("message",n),function(){window.removeEventListener("message",n),clearTimeout(e)}}},[nk]),{clientId:nS,shouldInitGA:nW})).shouldInitGA,ne=e9.clientId,nn=(0,el.k)(eW),na=(no={queueEvent:nt=(0,v.useCallback)(function(e){nn.send({type:o.QueueEvent,fn:e})},[nn]),onGaInitialized:nr=(0,v.useCallback)(function(e,n){nn.send({type:o.GaInitialized,gaMeasurementId:e,clientId:n})},[nn])}).queueEvent,ni=no.onGaInitialized,ns=(nl={dispatchVendorAnalyticsEvent:nd=(0,v.useMemo)(function(){return function(e){if(ex){var n,t,r=e3===d.Lite&&(eA.match(e)||eZ.match(e)||eJ(l.DemoEngaged15).match(e)||eJ(l.DemoEngaged25).match(e)||eJ(l.DemoEngaged50).match(e)||eJ(l.DemoEngaged75).match(e)||eJ(l.DemoEngaged100).match(e)||eV.match(e)||ez.match(e)),o=e3===d.Full&&(eA.match(e)||eZ.match(e)||eQ.match(e)||eB.match(e)||eM.match(e)||eG.match(e)||eT.match(e)||eO.match(e)||eq.match(e)||eN.match(e)||ez.match(e)||eH.match(e)||eV.match(e)||eR.match(e));(r||o)&&na(function(){return e1(function(){var n;"function"==typeof window.gtag&&window.gtag("event",e.name,e.payload)})})}}},[ex,na,e1,e3]),enabled:e3===d.Lite,demoId:eb,demoName:e2,hostInfo:e5,shareUrl:eP,httpReferer:e8,demoPlayerEventEmitter:e7}).demoId,nm=nl.demoName,nf=nl.shareUrl,nv=nl.httpReferer,ng=nl.dispatchVendorAnalyticsEvent,np=nl.enabled,nh=nl.demoPlayerEventEmitter,nw=nl.hostInfo,n_=null!=nv?nv:"",ny=null!==(nc=null===(nu=nw.current)||void 0===nu?void 0:nu.url)&&void 0!==nc?nc:"",nE=(0,el.k)(e$,{context:{enabled:np},actions:{sendEngagementAnalyticsEvent:(0,ek.f0)(function(e){var n=eD.get(e.reachedEngagementLevel[0]);return n&&!1===e.reachedEngagementLevel[1]?(ng(eJ(n).create({demo_id:ns,demo_name:nm,demo_url:nf,seconds_spent:e.secondsSpent,percent_viewed:e.percentViewed,referrer:n_,host_url:ny})),{reachedEngagementLevel:[e.reachedEngagementLevel[0],!0,]}):{}})}}).send,(0,v.useEffect)(function(){if(np){var e=nh.on(E.W6.widgetChangeEvent,function(e){nE({type:"viewProgress",percentValue:e.progress})}),n=nh.on(E.W6.pageChangeEvent,function(e){nE({type:"viewProgress",percentValue:e.progress})});return function(){e(),n()}}},[nh,np,nE]),(0,v.useEffect)(function(){e4&&ej.ga_measurement_id&&ni(ej.ga_measurement_id,null!=ne?ne:null)},[e4,ni,ej.ga_measurement_id,ne]),(0,v.useEffect)(function(){nd(eA.create({demo_id:eb,demo_name:e2,demo_url:eP}))},[eb,e2,eP,nd]),(0,v.useEffect)(function(){if(ej.kind!==_.lI.Image)return e7.on(E.W6.pageChangeEvent,function(e){var n=null==ej?void 0:ej.pages.find(function(n){return n.id===e.pageId});if(!n){console.error("Unable to find page by id: ".concat(e.pageId));return}nd(eQ.create({demo_id:eb,demo_name:e2,demo_url:eP,page_id:n.id,page_name:n.name}))})},[nd,eP,e2,e7,ej,eb,]),(0,v.useEffect)(function(){return e7.on(E.W6.widgetChangeEvent,function(e){var n=e.widgetId,t=null==eF?void 0:eF[n],r=t?null==eU?void 0:eU[t.flowId]:null;if(t&&r){var o=r.widgets.findIndex(function(e){return e===n});nd(eB.create({demo_id:eb,demo_name:e2,demo_url:eP,flow_id:r.id,flow_name:r.name,chapter_id:r.id,chapter_name:r.name,step_id:t.id,step_index:o}))}})},[eF,eU,eb,eP,e2,nd,e7,]),(0,v.useEffect)(function(){return e7.on(E.W6.widgetCtaClickEvent,function(e){var n=e.widgetId,t=null==eF?void 0:eF[n],r=t?null==eU?void 0:eU[t.flowId]:null;if(t&&r){var o=r.widgets.findIndex(function(e){return e===n});nd(eM.create({demo_id:eb,demo_name:e2,demo_url:eP,flow_id:r.id,flow_name:r.name,chapter_id:r.id,chapter_name:r.name,step_id:t.id,step_index:o}))}})},[e7,eF,eU,eb,eP,e2,nd,]),(0,v.useEffect)(function(){return e7.on(E.W6.widgetSecondaryClickEvent,function(e){var n=e.widgetId,t=null==eF?void 0:eF[n],r=t?null==eU?void 0:eU[t.flowId]:null;if(t&&r){var o=r.widgets.findIndex(function(e){return e===n});nd(eG.create({demo_id:eb,demo_name:e2,demo_url:eP,flow_id:r.id,flow_name:r.name,chapter_id:r.id,chapter_name:r.name,step_id:t.id,step_index:o}))}})},[e7,eF,eU,eb,eP,e2,nd,]),(0,v.useEffect)(function(){return e7.on(E.W6.flowChangeEvent,function(e){var n=e.flowId,t=null==eU?void 0:eU[n];t&&(nd(eT.create({demo_id:eb,demo_name:e2,demo_url:eP,flow_id:t.id,flow_name:t.name})),nd(eO.create({demo_id:eb,demo_name:e2,demo_url:eP,chapter_id:t.id,chapter_name:t.name})))})},[eF,eU,eb,eP,e2,e7,nd,]),(0,v.useEffect)(function(){return e7.on(E.W6.lastWidgetEnterEvent,function(e){var n=e.flowId,t=null==eU?void 0:eU[n];t&&(nd(eq.create({demo_id:eb,demo_name:e2,demo_url:eP,flow_id:t.id,flow_name:t.name})),nd(eN.create({demo_id:eb,demo_name:e2,demo_url:eP,chapter_id:t.id,chapter_name:t.name})))})},[eF,eU,eb,eP,e2,e7,nd,]),nI=(0,v.useCallback)(function(e,n){if(n){var t,r,o,a=null==eF?void 0:eF[n],i=a?null==eU?void 0:eU[a.flowId]:null;a&&i&&(t=i.widgets.findIndex(function(e){return e===n})),o=null==i?void 0:i.name,r=null==i?void 0:i.id}nd(ez.create({demo_id:eb,demo_name:e2,demo_url:eP,step_id:n,step_index:t,flow_id:r,flow_name:o,chapter_id:r,chapter_name:o,ext_url:(null==e?void 0:e.url)||"",ext_url_target:e.target}))},[eb,e2,eP,eU,eF,nd]),(0,v.useEffect)(function(){return e7.on(E.W6.flowlistItemOpenExternalUrlEvent,function(e){var n,t=e.data,r=(0,ey.L)((0,N.Z)((0,s.Z)({},t),{additionalQuery:null===(n=e5.current)||void 0===n?void 0:n.query}));r&&nI(r)})},[e7,e5,nI]),(0,v.useEffect)(function(){return e7.on(E.W6.widgetOpenExternalUrlEvent,function(e){var n,t=e.data,r=e.widgetId,o=(0,ey.L)((0,N.Z)((0,s.Z)({},t),{additionalQuery:null===(n=e5.current)||void 0===n?void 0:n.query}));o&&nI(o,r)})},[e7,e5,nI]),nC=(0,v.useCallback)(function(e,n){if(n){var t,r,o,a=null==eF?void 0:eF[n],i=a?null==eU?void 0:eU[a.flowId]:null;a&&i&&(t=i.widgets.findIndex(function(e){return e===n})),o=null==i?void 0:i.name,r=null==i?void 0:i.id}nd(eH.create({demo_id:eb,demo_name:e2,demo_url:eP,step_id:n,step_index:t,flow_id:r,flow_name:o,chapter_id:r,chapter_name:o,ext_url:(null==e?void 0:e.url)||"",ext_url_target:e.target}))},[eb,e2,eP,eU,eF,nd]),(0,v.useEffect)(function(){return e7.on(E.W6.customCtaClickEvent,function(e){var n=e.data,t=e.widgetId;try{var r,o=(0,ey.L)((0,N.Z)((0,s.Z)({},n),{additionalQuery:null===(r=e5.current)||void 0===r?void 0:r.query}));if(!o)return;nC(o,t)}catch(a){(0,e_.Tb)(a)}})},[e7,nC,e5]),(0,v.useEffect)(function(){var e=function(e,n){if(e.isKnownLead&&!(null==n?void 0:n.isKnownLead)&&e.lead){var t=(0,s.Z)({},e.lead);nd(eV.create((0,s.Z)({demo_id:eb,demo_name:e2,demo_url:eP},function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"_";try{return(0,es.Z)(n,function(n,o,a){var i=t?"".concat(t).concat(r).concat(a):a;return(0,ef.Z)(o)&&!(0,ev.Z)(o)?(0,em.Z)(n,e(o,i,r)):("string"==typeof o||"number"==typeof o||"boolean"==typeof o)&&(n[i]=o),n},{})}catch(o){return console.error(o),{}}}(t,"","lead"))))}};return eK.onChange(e),function(){eK.off(e)}},[e7,eb,e2,eP,eK,nd,]),(0,v.useEffect)(function(){return e7.on(E.W6.flowlistItemClickEvent,function(e){var n=e.itemId;nd(eR.create({demo_id:eb,demo_name:e2,demo_url:eP,flowlist_item_id:n}))})},[e7,e2,eP,eb,nd,]),(0,v.useEffect)(function(){return e7.on(E.W6.walkthroughFinishedEvent,function(){nd(eZ.create({demo_id:eb,demo_name:e2,demo_url:eP}))})},[e7,eb,e2,eP,nd,]),null},e6=t(26297);function e5(e){var n=e.demoId,t=e.shareUrl,r=e.demoName,o=(0,e6.Z)(e,["demoId","shareUrl","demoName"]),a={event:o.event,demo:{id:n,url:t,name:r}};return o.event===eE.rc.LeadCaptured&&o.lead&&(a.lead=o.lead),(o.event===eE.rc.FlowChanged||o.event===eE.rc.WidgetChanged||o.event===eE.rc.FlowEnd||o.event===eE.rc.OpenedExternalUrl||o.event===eE.rc.WidgetCtaClick||o.event===eE.rc.WidgetSecondaryClick||o.event===eE.rc.CustomCta||o.event===eE.rc.WidgetReady)&&o.flow&&(a.flow=o.flow,o.event===eE.rc.FlowChanged&&(a.deprecated="This event is deprecated. See: 'chapter_start' event"),o.event===eE.rc.FlowEnd&&(a.deprecated="This event is deprecated. See: 'chapter_end' event"),o.event!==eE.rc.FlowChanged&&o.event!==eE.rc.FlowEnd&&(a.chapter=o.flow)),(o.event===eE.rc.ChapterStart||o.event===eE.rc.ChapterEnd)&&o.chapter&&(a.chapter=o.chapter),(o.event===eE.rc.WidgetChanged||o.event===eE.rc.OpenedExternalUrl||o.event===eE.rc.WidgetCtaClick||o.event===eE.rc.WidgetSecondaryClick||o.event===eE.rc.CustomCta||o.event===eE.rc.WidgetReady)&&o.widget&&(a.step=(0,N.Z)((0,s.Z)({},o.widget),{index:o.widget.index+1})),(o.event===eE.rc.PageChanged||o.event===eE.rc.RecordingStart)&&(a.page=o.page),(o.event===eE.rc.OpenedExternalUrl||o.event===eE.rc.CustomCta)&&(a.target={url:o.extUrl,target:o.extUrlTarget}),o.event===eE.rc.FlowlistItemClick&&(a.checklist_item={id:o.flowlistItemId}),{message:eE.mr,payload:a}}var e7=function(){var e,n,t,r,o,a,i,d,l,u,c,m,f,g,p,h,w,_,y,I,C,x,b,k,j,S,U=ee(),F=U.state,W=U.shareUrl,L=U.demoId,D=U.demoPlayerEventEmitter,P=U.queryFlags,A=U.hostInfo,Z=U.setCrossOriginTextSubstitutions;return n=(e={project:F.context.project,flows:F.context.flows,widgets:F.context.widgets,demoId:L,query:P.query,enabled:F.matches(eo.Ae.Playback),baseUrl:"https://api.storylane.io/api/v1/",shareUrl:W,demoPlayerEventEmitter:D,enabledRecordingStartEvent:P.recording,enabledWidgetReadyEvent:P.recording,enabledRecordingStopEvent:P.recording,hostInfo:A,onReceiveTextSubstitutions:Z}).enabled,t=e.demoId,r=e.project,o=e.flows,a=e.widgets,i=e.query,d=e.baseUrl,l=e.shareUrl,u=e.enabledRecordingStartEvent,c=e.enabledWidgetReadyEvent,m=e.enabledRecordingStopEvent,f=e.onReceiveTextSubstitutions,g=e.demoPlayerEventEmitter,p=e.hostInfo,w=(h=(0,v.useState)(!1))[0],_=h[1],y=null==r?void 0:r.id,I=null==r?void 0:r.company_id,C=(null==r?void 0:r.name)||"",x=(0,v.useCallback)(function(e){window.parent!==window&&window.parent.postMessage(e,"*"),window.postMessage(e,"*")},[]),k=null==(b=(0,eC.A)({eventAction:eC.B.StorylaneShareUserId,postMessageAction:eC.B.StorylaneSharePageDemoReady}).eventData)?void 0:b.user_id,(0,v.useEffect)(function(){if(y&&I){var e=function(e){try{var n,t,r;(null===(n=e.data)||void 0===n?void 0:n.message)===eE.hR&&Boolean(null===(t=e.data)||void 0===t?void 0:t.payload.token)&&"object"==typeof(null===(r=e.data)||void 0===r?void 0:r.payload.token)&&f(e.data.payload.token)}catch(o){console.error(o)}};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}},[t,y,I,i,d,k,f,]),(0,v.useEffect)(function(){var e=window.parent;n&&!w&&(_(!0),e.postMessage({source:eE.IY,ready:!0},"*"))},[n,w]),(0,v.useEffect)(function(){x(e5({event:eE.rc.ProjectResolved,demoId:t,shareUrl:l,demoName:C}))},[x,t,C,l]),(0,v.useEffect)(function(){return g.on(E.W6.pageChangeEvent,function(e){var n=e.pageId,o=null==r?void 0:r.pages.find(function(e){return e.id===n});if(!o){console.error("Unable to find page by id: ".concat(n));return}x(e5({event:eE.rc.PageChanged,shareUrl:l,demoId:t,page:{id:o.id,name:o.name},demoName:C}))})},[t,C,l,r.pages,g,x,]),(0,v.useEffect)(function(){if(u){var e=function(e){var n=e.pageId,o=null==r?void 0:r.pages.find(function(e){return e.id===n});if(!o){console.error("Unable to find page by id: ".concat(n));return}x(e5({event:eE.rc.RecordingStart,shareUrl:l,demoId:t,page:{id:o.id,name:o.name},demoName:C}))};return g.on(E.W6.recordingStartReadyEvent,e)}},[x,u,g,t,C,l,r.pages,]),(0,v.useEffect)(function(){return g.on(E.W6.widgetChangeEvent,function(e){var n=e.widgetId,r=null==a?void 0:a[n],i=r?null==o?void 0:o[r.flowId]:null;if(r&&i){var d=i.widgets.findIndex(function(e){return e===n});x(e5({event:eE.rc.WidgetChanged,demoId:t,shareUrl:l,flow:{id:i.id,name:i.name},widget:{id:r.id,index:d},demoName:C}))}})},[x,a,o,t,l,C,g,]),(0,v.useEffect)(function(){if(c)return g.on(E.W6.widgetReadyEvent,function(e){var n=e.widgetId,r=null==a?void 0:a[n],i=r?null==o?void 0:o[r.flowId]:null;if(r&&i){var d=i.widgets.findIndex(function(e){return e===n});x(e5({event:eE.rc.WidgetReady,demoId:t,shareUrl:l,flow:{id:i.id,name:i.name},widget:{id:r.id,index:d},demoName:C}))}})},[x,a,c,o,t,l,C,g,]),(0,v.useEffect)(function(){return g.on(E.W6.widgetCtaClickEvent,function(e){var n=e.widgetId,r=null==a?void 0:a[n],i=r?null==o?void 0:o[r.flowId]:null;if(r&&i){var d=i.widgets.findIndex(function(e){return e===n});x(e5({event:eE.rc.WidgetCtaClick,demoId:t,shareUrl:l,flow:{id:i.id,name:i.name},widget:{id:r.id,index:d},demoName:C}))}})},[g,x,a,o,t,l,C,]),(0,v.useEffect)(function(){return g.on(E.W6.widgetSecondaryClickEvent,function(e){var n=e.widgetId,r=null==a?void 0:a[n],i=r?null==o?void 0:o[r.flowId]:null;if(r&&i){var d=i.widgets.findIndex(function(e){return e===n});x(e5({event:eE.rc.WidgetSecondaryClick,demoId:t,shareUrl:l,flow:{id:i.id,name:i.name},widget:{id:r.id,index:d},demoName:C}))}})},[g,x,a,o,t,l,C,]),(0,v.useEffect)(function(){return g.on(E.W6.flowChangeEvent,function(e){var n=e.flowId,r=null==o?void 0:o[n];r&&(x(e5({event:eE.rc.FlowChanged,demoId:t,shareUrl:l,flow:{id:r.id,name:r.name},demoName:C})),x(e5({event:eE.rc.ChapterStart,demoId:t,shareUrl:l,chapter:{id:r.id,name:r.name},demoName:C})))})},[a,o,t,l,C,x,g,]),(0,v.useEffect)(function(){return g.on(E.W6.lastWidgetEnterEvent,function(e){var n=e.flowId,r=null==o?void 0:o[n];r&&(x(e5({event:eE.rc.FlowEnd,demoId:t,shareUrl:l,flow:{id:r.id,name:r.name},demoName:C})),x(e5({event:eE.rc.ChapterEnd,demoId:t,shareUrl:l,chapter:{id:r.id,name:r.name},demoName:C})))})},[a,x,o,t,l,C,g,]),j=(0,v.useCallback)(function(e,n){var r=null,i=null,d=null;if(n){var u=null==a?void 0:a[n],c=u?null==o?void 0:o[u.flowId]:null;u&&c&&(r=c.widgets.findIndex(function(e){return e===n})),d=(null==c?void 0:c.name)||null,i=(null==c?void 0:c.id)||null}var s=null!==r&&n?{id:n,index:r}:void 0;x(e5({event:eE.rc.OpenedExternalUrl,demoId:t,shareUrl:l,demoName:C,widget:s,flow:i&&d?{id:i,name:d}:void 0,extUrl:(null==e?void 0:e.url)||"",extUrlTarget:e.target}))},[t,C,x,l,o,a]),S=(0,v.useCallback)(function(e,n){var r=null,i=null,d=null;if(n){var u=null==a?void 0:a[n],c=u?null==o?void 0:o[u.flowId]:null;u&&c&&(r=c.widgets.findIndex(function(e){return e===n})),d=(null==c?void 0:c.name)||null,i=(null==c?void 0:c.id)||null}var s=null!==r&&n?{id:n,index:r}:void 0;x(e5({event:eE.rc.CustomCta,demoId:t,shareUrl:l,demoName:C,widget:s,flow:i&&d?{id:i,name:d}:void 0,extUrl:(null==e?void 0:e.url)||"",extUrlTarget:e.target}))},[t,C,x,l,o,a]),(0,v.useEffect)(function(){var e=[],n=function(e){var n,t=(0,ey.L)({url:e.data.url,target:e.data.target,additionalQuery:null===(n=p.current)||void 0===n?void 0:n.query});t&&j(t)};return e.push(g.on(E.W6.flowlistItemOpenExternalUrlEvent,n)),e.push(g.on(E.W6.widgetOpenExternalUrlEvent,n)),e.push(g.on(E.W6.pageLinkOpenExternalUrlEvent,n)),function(){e.forEach(function(e){return e()})}},[g,p,j]),(0,v.useEffect)(function(){return g.on(E.W6.customCtaClickEvent,function(e){var n,t=e.data,r=e.widgetId,o=(0,ey.L)((0,N.Z)((0,s.Z)({},t),{additionalQuery:null===(n=p.current)||void 0===n?void 0:n.query}));o&&(j(o,r),S(o,r))})},[g,S,j,x,p,]),(0,v.useEffect)(function(){return g.on(E.W6.leadCaptureEvent,function(e){x(e5({event:eE.rc.LeadCaptured,demoId:t,shareUrl:l,demoName:C,lead:e.inputLead}))})},[t,C,l,g,x]),(0,v.useEffect)(function(){return g.on(E.W6.flowlistItemClickEvent,function(e){var n=e.itemId;x(e5({event:eE.rc.FlowlistItemClick,demoId:t,shareUrl:l,demoName:C,flowlistItemId:n}))})},[a,o,t,l,C,g,x,]),(0,v.useEffect)(function(){return g.on(E.W6.walkthroughFinishedEvent,function(){x(e5({event:eE.rc.DemoFinished,demoId:t,shareUrl:l,demoName:C})),m&&x(e5({event:eE.rc.RecordingStop,shareUrl:l,demoId:t,demoName:C}))})},[m,t,l,C,g,x,]),null},e8=new E.NV,e2=function(e){var n,t,r,o,a,i,d,l,u,g,h,x,b=e.demoId,k=e.responseData,j=e.baseUrl,L=e.ssParentPageType,D=e.httpReferer,P=(0,F.useRouter)(),A=(0,et.Q)(P.asPath).toString(),R=(0,er.$t)({search:A}),N=R.recording,Q=R.forceHideSteps,V=R.forceHideContent,T=R.scale,O=R.forceStartFlowIndex,B=R.autoPlay,M=R.disableAnimations,G=(0,m.Z)((0,er.s$)({demoId:b,baseUrl:"https://api.storylane.io/api/v1/",search:A,publishedProject:k,path:P.asPath}),3),z=G[0],H=G[1],J=G[2],K=N?null:null===(n=z.context.project)||void 0===n?void 0:n.flowlists[0],Y=(0,er.zO)({search:A});(0,er.YP)({demoPageService:J,demoPlayerEventEmitter:e8});var $="".concat(j).concat(P.asPath),ee="".concat($.replace("/demo/","/share/"));(0,v.useEffect)(function(){return e8.on(E.W6.walkthroughFinishedEvent,function(){H({type:eo.F_.FinishWalkthrough})})},[H]),(0,er.HF)({send:H,demoPlayerEventEmitter:e8}),(0,er.Ei)({demoPlayerEventEmitter:e8,hostInfo:Y}),(0,er.rc)({projectId:z.context.project.id,demoPlayerEventEmitter:e8,shareUrl:ee,enabled:N}),(0,er._0)({enabled:N,projectFlows:z.context.flows,demoPlayerEventEmitter:e8});var el=Boolean((null===(t=z.context.project)||void 0===t?void 0:t.kind)===_.lI.Html?null===(r=z.context.project)||void 0===r?void 0:r.feature_flags.responsive_html_demo_player:null===(o=z.context.project)||void 0===o?void 0:o.feature_flags.responsive_image_demo_player),eu=null===(a=z.context.project)||void 0===a?void 0:a.feature_flags.autoscale_vendor_form,ec=(null===(i=z.context.project)||void 0===i?void 0:i.display_config.min_width_warning)&&!N,es=null===(d=z.context.project)||void 0===d?void 0:d.whitelabel,em="".concat("https://app.storylane.io").concat(C.Z.SignUp,"?utm_source=product&utm_medium=in-app&utm_campaign=made-with-storylane-logo"),ef=(0,v.useState)(function(){return(0,W.ok)()}),ev=ef[0],eg=ef[1],ep=(0,v.useState)(function(){return(0,W.NR)()}),eh=ep[0],ew=ep[1],e_=(0,v.useCallback)(function(e){(0,W.sE)(e),eg(e)},[]),ey=(null===(l=z.context.project)||void 0===l?void 0:l.kind)===_.lI.Image&&!M,eE=Z("page_id")||(null===(u=z.context.project)||void 0===u?void 0:u.start_page_id),eI=(0,v.useMemo)(function(){var e;return{isResponsiveEnabled:el,isWalkthroughTourDisabled:Q,startFlowIndex:O,startPageId:eE,isLeadCaptured:Boolean(z.context.lead),replayButton:es&&{backgroundColor:es.replay_demo_bg_color,value:es.replay_demo_text,color:es.replay_demo_color},resumeButton:es&&{backgroundColor:es.resume_demo_bg_color,value:es.resume_demo_text,color:es.resume_demo_color},isWidgetAnimationDisabled:M,isWidgetScrollAnimationDisabled:M,isWidgetTranslationAnimationEnabled:Boolean(z.context.project.translation_animation_enabled),isKeepScrollBetweenWidgets:z.context.project.feature_flags.keep_demo_scroll_position,isHtmlPreRenderingEnabled:z.context.project.feature_flags.pre_render_next_page,isShadowDomEnabled:z.context.project.feature_flags.shadow_dom_editing,isRendererHtmlScaleEnabled:Boolean(z.context.project&&(0,ea.w)({displayConfigRendererDimensions:z.context.project.display_config.renderer_dimensions,startPageDimensions:z.context.project.pages[0].dimensions,queryFlagScale:T,projectFlagScale:z.context.project.display_config.auto_scale})),isVendorLeadFormScaleEnabled:eu,watermarkLogoHref:em,watermarkTextHref:"".concat("https://app.storylane.io").concat(C.Z.SignUp,"?utm_source=product&utm_medium=in-app&utm_campaign=made-with-storylane-text"),shouldAddWatermark:Boolean(null==es?void 0:es.brand_name_enabled),shouldDisplayBrandWatermark:Boolean(null==es?void 0:es.product_logo_enabled),isReplayEnabled:null===(x=null===(e=z.context.project)||void 0===e?void 0:e.display_config.replay)||void 0===x||x,autoPlay:V?0:B,isAudioAutoplayEnabled:ev,setIsAudioAutoplayEnabled:e_,isVideoAutoplayEnabled:eh,setIsVideoAutoplayEnabled:ew,isWalkthroughSandboxMode:V}},[el,Q,O,eE,z.context.lead,z.context.project,es,M,T,eu,em,B,ev,e_,eh,V,]),eC=(0,er.HY)({isWalkthroughSandboxMode:V,isRecording:Boolean(N)}),ex=(0,er.W$)({search:A}),eb=(0,v.useState)({}),ek=eb[0],ej=eb[1],eS=(0,v.useMemo)(function(){var e=z.context.lead?(0,I.getSubstitutionsFromLead)(z.context.lead):{},n=z.context.substitutions.filter(function(e){return e.kind===y.iU.Text}).reduce(function(e,n){var t=n.key,r=n.value;return r&&(e["".concat((0,I.wrapSubstitutionKey)(t))]=r),e},{}),t=Object.keys(ek).reduce(function(e,n){return e["".concat((0,I.wrapSubstitutionKey)(n))]=ek[n],e},{});return(0,s.Z)({},n,ex,t,e)},[z.context.substitutions,z.context.lead,ex,ek,]),eU=(0,v.useMemo)(function(){return z.context.substitutions.filter(function(e){return e.kind===y.iU.Image}).reduce(function(e,n){return e[n.id]=(0,s.Z)({},n),e},{})},[z.context.substitutions]);return(0,er.uG)({demoPlayerEventEmitter:e8,startPageId:eE}),(0,er.AD)({demoPlayerEventEmitter:e8,shareUrl:ee}),(0,er.dH)({scripts:z.context.project.scripts}),(0,f.jsxs)(X,{hostInfo:Y,service:J,demoId:b,queryFlags:R,state:z,shareUrl:ee,demoPlayerEventEmitter:e8,setCrossOriginTextSubstitutions:ej,demoParentType:L,httpReferer:D,children:[(0,f.jsx)(ei.Z,{font:null===(g=z.context.project)||void 0===g?void 0:g.display_config.font}),(0,f.jsxs)(w(),{children:[(0,U.Z)({isResponsiveDemoPlayerEnabled:el,htmlClassName:"sl-player-html"}),(null===(h=z.context.project)||void 0===h?void 0:h.display_config.mobile_viewport)?(0,f.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}):(0,f.jsx)("meta",{name:"viewport",content:"maximum-scale=1.0"})]}),(0,f.jsx)(e1,{}),(0,f.jsx)(e7,{}),(0,f.jsxs)("div",{className:q().root,"data-zoomin":ey,style:{fontFamily:"var(--project-font-family)"},id:ed.GN,children:[z.matches(eo.Ae.LeadFormShown)&&(0,f.jsx)(en,{showWatermark:z.context.project.whitelabel.product_logo_enabled,watermarkLogoHref:em}),(z.matches(eo.Ae.Playback)||z.matches(eo.Ae.LeadFormShown))&&(0,f.jsx)("div",{className:p()(q()["demo-container"],(0,c.Z)({},q()["demo-container--paused"],z.matches(eo.Ae.LeadFormShown))),children:(0,f.jsx)(E.ZP,{project:z.context.project,projectFlowlist:K||null,projectFlows:z.context.flows,textSubstitutions:eS,imageSubstitutions:eU,projectWidgets:z.context.widgets,pages:z.context.project.pages,startPlayback:z.matches(eo.Ae.Playback),config:eI,configNew:eC,hostInfo:Y,emitter:e8})}),z.matches(eo.Ae.Playback)&&ec&&(0,f.jsx)(S,{width:z.context.project.display_config.min_width,message:z.context.project.display_config.min_width_warning_text,backgroundImageUrl:z.context.project.pages[0].thumbnail_url,targetDomId:ed.GN,shareUrl:ee,showFullScreenButton:null===L,showContinueButton:"share"===L||"hub"===L})]})]})}},15079:function(e,n,t){"use strict";t.d(n,{A:function(){return i},B:function(){return r}});var r,o,a=t(2784);function i(e){var n=e.eventAction,t=e.postMessageAction,r=(0,a.useState)(null),o=r[0],i=r[1],d=(0,a.useCallback)(function(e){var t;(null===(t=e.data)||void 0===t?void 0:t.action)===n&&i(e.data.payload)},[n]);return(0,a.useEffect)(function(){try{var e,n;t&&(null===(n=window.top)||void 0===n||n.postMessage(t,"*")),null==window||null===(e=window.top)||void 0===e||e.addEventListener("message",d)}catch(r){}return function(){try{var e;null==window||null===(e=window.top)||void 0===e||e.removeEventListener("message",d)}catch(n){}}},[n,d,t]),{eventData:o}}(o=r||(r={})).StorylaneSharePageDemoReady="storylane-demo-ready",o.StorylaneShareUserId="storylane-share-user-id"},83564:function(e,n,t){"use strict";function r(e){var n=e.displayConfigRendererDimensions,t=e.startPageDimensions,r=e.queryFlagScale,o=e.projectFlagScale;if(!(null===r?o:r))return!1;var a,i=(a=n||t,a.width>0&&a.height>0);return i||console.warn("Fallback embed dimensions with default values."),i}t.d(n,{w:function(){return r}})},47467:function(e){e.exports={root:"DemoPage_root__3LD9J","zoom-in":"DemoPage_zoom-in__5yJak","demo-container":"DemoPage_demo-container__YAit2","demo-container--paused":"DemoPage_demo-container--paused__sNztW",preloader:"DemoPage_preloader__4xx4E"}},87760:function(e){e.exports={root:"DefaultLeadForm_root__Q_cfn",header:"DefaultLeadForm_header__JlSGh",submit:"DefaultLeadForm_submit___Ot8g",formGrid:"DefaultLeadForm_formGrid__tetQW",emailField:"DefaultLeadForm_emailField___6cNr",phoneField:"DefaultLeadForm_phoneField__pEfQG",companyField:"DefaultLeadForm_companyField__cziuY"}},11586:function(e){e.exports={watermark:"LeadForm_watermark__ikXJQ"}},79758:function(e){e.exports={root:"ScreenSizeWarning_root__VR9lk",title:"ScreenSizeWarning_title__7v_WW",buttonFullScreen:"ScreenSizeWarning_buttonFullScreen__b4WLS"}}}]);